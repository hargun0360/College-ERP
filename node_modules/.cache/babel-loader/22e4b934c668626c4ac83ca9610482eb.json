{"ast":null,"code":"import _objectSpread from\"E:/College-ERP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/College-ERP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/College-ERP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/College-ERP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import SubmitButton from'../../../Components/UI/Button/Button';import{useForm}from'react-hook-form';import'./AdminDetailForm.css';import*as actionCreators from\"../../../Service/Action/action\";import{useDispatch,useSelector}from'react-redux';import Spinner from'../../../Components/UI/Spinner/Spinner';import profile from'../../../Assets/Images/Profile.png';import AuthService from'../../../ApiServices/AuthService';import Toaster from'../../../Components/UI/Toaster/Toaster';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminDetailForm=function AdminDetailForm(props){var _errors$fullname,_errors$email,_errors$mobilenumber,_errors$qualification;var _useState=useState(profile),_useState2=_slicedToArray(_useState,2),avatar=_useState2[0],setAvatar=_useState2[1];var user=localStorage.getItem(\"userd\");var _useState3=useState(profile),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var id=localStorage.getItem(\"userid\");var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),email=_useState8[0],setEmail=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),mobile=_useState10[0],setMobile=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),degree=_useState12[0],setDegree=_useState12[1];var _useState13=useState(true),_useState14=_slicedToArray(_useState13,2),loading=_useState14[0],setLoading=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),flag=_useState16[0],setFlag=_useState16[1];var _useState17=useState(profile),_useState18=_slicedToArray(_useState17,2),preview=_useState18[0],setPreview=_useState18[1];var _useForm=useForm({mode:\"onTouched\",defaultValues:{fullname:name,email:email,mobilenumber:mobile,qualification:degree}}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,reset=_useForm.reset;useEffect(function(){loadAdmin();},[reset]);var dispatch=useDispatch();var loadAdmin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,obj;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return AuthService.getadminDetails(user,id);case 3:res=_context.sent;console.log(res);setLoading(false);setImage(res.data.profile.image);setName(res.data.profile.fullname);setEmail(res.data.profile.email);setMobile(res.data.profile.mobile);setDegree(res.data.profile.degree);obj={fullname:res.data.profile.fullname,email:res.data.profile.email,mobilenumber:res.data.profile.mobile,qualification:res.data.profile.degree};console.log(obj);reset(obj);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[0,16]]);}));return function loadAdmin(){return _ref.apply(this,arguments);};}();var onSubmit=function onSubmit(data,e){e.preventDefault();var myForm=new FormData();myForm.set(\"fullname\",data.fullname);myForm.set(\"email\",data.email);myForm.set(\"mobile\",data.mobilenumber);myForm.set(\"degree\",data.qualification);myForm.set(\"image\",avatar);AuthService.updateAdminDetails(myForm,user,id).then(function(res){console.log(res);loadAdmin();setFlag(false);if(res){toast.success(\"Updated Successfully\");}dispatch(actionCreators.update(true));}).catch(function(e){console.log(e);});e.target.reset();};var handleClick=function handleClick(e){e.preventDefault();props.setTrigger(false);};var handleChange=function handleChange(e){setFlag(true);console.log(e.target.files[0]);if(e.target.files&&e.target.files[0]){setAvatar(e.target.files[0]);setPreview(URL.createObjectURL(e.target.files[0]));setImage(URL.createObjectURL(e.target.files[0]));console.log(e.target.files[0]);}};return loading?/*#__PURE__*/_jsx(Spinner,{}):props.trigger?/*#__PURE__*/_jsxs(\"div\",{className:\"Modal-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-Form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Admin-Form-Heading\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Fill Personal Details\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"Admin-Input\",encType:\"multipart/form-data\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Full-Name\",children:\"Full Name\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-detail\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form\",size:\"40\",type:\"text\",name:\"fullname\"},register(\"fullname\",{required:\"**Name is required\"})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$fullname=errors.fullname)===null||_errors$fullname===void 0?void 0:_errors$fullname.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Email\",children:\"Email\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"Input-detail1\",children:[/*#__PURE__*/_jsx(\"i\",{id:\"emailicon1\",className:\"fa fa-envelope icon\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form1\",size:\"38\",type:\"email\",placeholder:\"example@akgec.ac.in\",name:\"email\"},register(\"email\",{required:\"**Email is required\",pattern:{value:/^[a-zA-Z0-9_\\-]{4,}[@][a][k][g][e][c][\\.][a][c][\\.][i][n]$/i,message:\"**This is not a valid email\"}})))]}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Mobile\",children:\"Mobile Number\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-detail\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form\",size:\"40\",type:\"text\",name:\"mobilenumber\"},register(\"mobilenumber\",{required:\"**Mobile Number is required\",pattern:{value:/^[6789][0-9]{9}$/i,message:\"**This is not a valid mobile number\"}})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$mobilenumber=errors.mobilenumber)===null||_errors$mobilenumber===void 0?void 0:_errors$mobilenumber.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Qualification\",children:\"Qualification\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-detail\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form\",size:\"40\",type:\"text\",name:\"qualification\"},register(\"qualification\",{required:\"**Qualification is required\"})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$qualification=errors.qualification)===null||_errors$qualification===void 0?void 0:_errors$qualification.message})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"registerImage\",children:[/*#__PURE__*/_jsx(\"img\",{src:flag?preview:\"https://ourcollege.herokuapp.com/\".concat(image),alt:\"Avatar Preview\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",accept:\"image/*\",title:\"\",onChange:handleChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Button-update\",children:/*#__PURE__*/_jsx(SubmitButton,{className:\"Admin-Details-Update\",Label:\"Update\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"cross1\",children:/*#__PURE__*/_jsx(\"i\",{id:\"crossed\",className:\"fa fa-times\",onClick:handleClick})})]}),/*#__PURE__*/_jsx(Toaster,{})]}):null;};export default AdminDetailForm;","map":{"version":3,"sources":["E:/College-ERP/src/Pages/Dashboard/Admin/AdminDetailForm.js"],"names":["React","useState","useEffect","SubmitButton","useForm","actionCreators","useDispatch","useSelector","Spinner","profile","AuthService","Toaster","toast","AdminDetailForm","props","avatar","setAvatar","user","localStorage","getItem","image","setImage","id","name","setName","email","setEmail","mobile","setMobile","degree","setDegree","loading","setLoading","flag","setFlag","preview","setPreview","mode","defaultValues","fullname","mobilenumber","qualification","register","handleSubmit","errors","formState","reset","loadAdmin","dispatch","getadminDetails","res","console","log","data","obj","onSubmit","e","preventDefault","myForm","FormData","set","updateAdminDetails","then","success","update","catch","target","handleClick","setTrigger","handleChange","files","URL","createObjectURL","trigger","required","message","pattern","value"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react'\r\nimport SubmitButton from '../../../Components/UI/Button/Button'\r\nimport { useForm } from 'react-hook-form'\r\nimport './AdminDetailForm.css'\r\nimport * as actionCreators from \"../../../Service/Action/action\";\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Spinner from '../../../Components/UI/Spinner/Spinner';\r\nimport profile from '../../../Assets/Images/Profile.png'\r\nimport AuthService from '../../../ApiServices/AuthService';\r\nimport Toaster from '../../../Components/UI/Toaster/Toaster'\r\nimport {toast} from 'react-toastify'\r\nconst AdminDetailForm = (props) => {\r\n    const [avatar,setAvatar] = useState(profile)\r\n    const user = localStorage.getItem(\"userd\");\r\n    const [image,setImage] = useState(profile);\r\n    const id = localStorage.getItem(\"userid\");\r\n    const [name,setName] = useState(\"\");\r\n    const [email,setEmail] = useState(\"\");\r\n    const [mobile,setMobile] = useState(\"\");\r\n    const [degree,setDegree] = useState(\"\");\r\n    const [loading,setLoading] = useState(true);\r\n    const [flag,setFlag] = useState(false);\r\n    const [preview,setPreview] = useState(profile);\r\n    const { register, handleSubmit, formState: { errors }, reset } = useForm({\r\n        mode: \"onTouched\",\r\n        defaultValues: {\r\n            fullname: name,\r\n            email: email,\r\n            mobilenumber: mobile,\r\n            qualification: degree,\r\n        },\r\n    });\r\n    useEffect(()=>{\r\n        loadAdmin();\r\n     },[reset]);\r\n     const dispatch = useDispatch();\r\n    const loadAdmin = async ()=> {\r\n        try {\r\n            const res = await AuthService.getadminDetails(user,id)\r\n            console.log(res);\r\n            setLoading(false);\r\n            setImage(res.data.profile.image)\r\n            setName(res.data.profile.fullname);\r\n            setEmail(res.data.profile.email);\r\n            setMobile(res.data.profile.mobile);\r\n            setDegree(res.data.profile.degree);  \r\n            const obj = {\r\n                fullname:res.data.profile.fullname,\r\n                email:res.data.profile.email,\r\n                mobilenumber:res.data.profile.mobile,\r\n                qualification:res.data.profile.degree,\r\n            } \r\n            console.log(obj);\r\n            reset(obj)\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        \r\n    }\r\n    \r\n    const onSubmit = (data, e) => {\r\n        e.preventDefault();\r\n        const myForm = new FormData();\r\n        myForm.set(\"fullname\", data.fullname);\r\n        myForm.set(\"email\", data.email);\r\n        myForm.set(\"mobile\", data.mobilenumber);\r\n        myForm.set(\"degree\", data.qualification);\r\n        myForm.set(\"image\", avatar);\r\n        AuthService.updateAdminDetails(myForm,user,id)\r\n        .then((res) => {\r\n            console.log(res);\r\n            loadAdmin();\r\n            setFlag(false)\r\n            if(res){\r\n                toast.success(\"Updated Successfully\");\r\n            }\r\n            dispatch(actionCreators.update(true));\r\n        }).catch((e => {\r\n            console.log(e);\r\n        }))\r\n        e.target.reset();\r\n    }\r\n    const handleClick = (e) => {\r\n        e.preventDefault();\r\n        props.setTrigger(false);\r\n    }\r\n    const handleChange = (e) => {\r\n        setFlag(true);\r\n        console.log(e.target.files[0]);\r\n         if ( e.target.files && e.target.files[0]) {\r\n            setAvatar(e.target.files[0]);\r\n            setPreview(URL.createObjectURL(e.target.files[0]))\r\n            setImage(URL.createObjectURL(e.target.files[0]));\r\n            console.log(e.target.files[0]);\r\n        }\r\n    }\r\n    \r\n    return loading ? (<Spinner />) : (props.trigger) ? (\r\n        <div className='Modal-box'>\r\n            <div className='Admin-Form'>\r\n                <div className='Admin-Form-Heading'>\r\n                    <h2>Fill Personal Details</h2>\r\n                </div>\r\n                <div>\r\n                    <form className='Admin-Input' encType=\"multipart/form-data\" onSubmit={handleSubmit(onSubmit)}>\r\n                        <div className='combine-input'>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Full-Name\">\r\n                                    Full Name\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail'>\r\n                                <input className='input-field-form' size={\"40\"} type=\"text\" name=\"fullname\" {...register(\"fullname\", { required: \"**Name is required\", })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.fullname?.message}</p>\r\n                        </div>\r\n                        <div className='combine-input'>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Email\">\r\n                                    Email\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail1'>\r\n                                <i id=\"emailicon1\" className=\"fa fa-envelope icon\"></i>\r\n                                <input className='input-field-form1' size={\"38\"} type=\"email\" placeholder='example@akgec.ac.in' name=\"email\" {...register(\"email\", { required: \"**Email is required\", pattern: { value: /^[a-zA-Z0-9_\\-]{4,}[@][a][k][g][e][c][\\.][a][c][\\.][i][n]$/i, message: \"**This is not a valid email\" } })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.email?.message}</p>\r\n                        </div>\r\n                        <div className='combine-input'>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Mobile\">\r\n                                    Mobile Number\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail'>\r\n                                <input className='input-field-form' size={\"40\"} type=\"text\" name=\"mobilenumber\" {...register(\"mobilenumber\", { required: \"**Mobile Number is required\", pattern: { value: /^[6789][0-9]{9}$/i, message: \"**This is not a valid mobile number\" } })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.mobilenumber?.message}</p>\r\n                        </div>\r\n                        <div className='combine-input'>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Qualification\">\r\n                                    Qualification\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail'>\r\n                                <input className='input-field-form' size={\"40\"} type=\"text\" name=\"qualification\" {...register(\"qualification\", { required: \"**Qualification is required\", })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.qualification?.message}</p>\r\n                        </div>\r\n                        <div id=\"registerImage\">\r\n                            <img src={flag ? preview : `https://ourcollege.herokuapp.com/${image}`} alt=\"Avatar Preview\" />\r\n                            <input\r\n                                type=\"file\"\r\n                                name=\"avatar\"\r\n                                accept=\"image/*\"\r\n                                title=''\r\n                                onChange={handleChange}\r\n                            />\r\n                        </div>\r\n                        <div className='Button-update'>\r\n                            <SubmitButton className=\"Admin-Details-Update\" Label=\"Update\" ></SubmitButton>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div className='cross1'>\r\n                    <i id=\"crossed\" className=\"fa fa-times\" onClick={handleClick} ></i>\r\n                </div>\r\n            </div>\r\n            <Toaster />\r\n        </div>\r\n    ) : null;\r\n}\r\n\r\nexport default AdminDetailForm\r\n"]},"metadata":{},"sourceType":"module"}