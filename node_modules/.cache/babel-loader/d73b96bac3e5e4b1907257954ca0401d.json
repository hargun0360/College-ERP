{"ast":null,"code":"import _regeneratorRuntime from\"E:/project1/project/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/project1/project/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/project1/project/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import'boxicons';import{Paper,TableContainer,TableBody,Table,TableHead,TableCell,TableRow}from\"@material-ui/core\";import'./Batches.css';import AddBatch from'./AddBatch';import{useNavigate}from'react-router-dom';import EditDetails from'./EditDetails';import AuthService from'../../../../ApiServices/AuthService';import Toaster from'../../../../Components/UI/Toaster/Toaster';import AddStudent from'./AddStudent';import*as actioncreators from'../../../../Service/Action/FacultyAction';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AdminBatches=function AdminBatches(){var _useSelector=useSelector(function(state){return state.toggle;}),val=_useSelector.val;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),year=_useState2[0],setYear=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),flag1=_useState4[0],setFlag1=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),trigger=_useState6[0],setTrigger=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),flag3=_useState8[0],setFlag3=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),flag2=_useState10[0],setFlag2=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),batch=_useState12[0],setBatch=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),tableData=_useState14[0],setTableData=_useState14[1];var dispatch=useDispatch();var navigate=useNavigate();var _useSelector2=useSelector(function(state){return state.edit;}),edit=_useSelector2.edit;console.log(edit);var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),flag=_useState16[0],setFlag=_useState16[1];var years=[{id:\"1\",yr:\"First\"},{id:\"2\",yr:\"Second\"},{id:\"3\",yr:\"Third\"},{id:\"4\",yr:\"Fourth\"}];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),batches=_useState18[0],setBatches=_useState18[1];var handleYearDropdown=function handleYearDropdown(e){setYear(e.target.value);console.log(e.target.value);setFlag(false);};var handleBatch=function handleBatch(e){e.preventDefault();setBatch(e.target.value);setFlag1(true);};var handleEditDetails=function handleEditDetails(id){localStorage.setItem(\"studentid\",id);dispatch(actioncreators.Edit(true));setFlag2(true);};var handleBatchDropdown=function handleBatchDropdown(e){setBatch(e.target.value);};var handleView=function handleView(id){localStorage.setItem(\"stuid\",id);navigate(\"/Dashboard/stuProfile\");};var handleStudent=function handleStudent(e){e.preventDefault();setFlag3(true);};var handleDelete=function handleDelete(id){setTrigger(true);console.log(trigger);AuthService.DelStudent(id).then(function(res){console.log(res);if(res){toast.success(\"Student Deleted Successfully\");}setTrigger(false);console.log(trigger);}).catch(function(e){console.log(e);toast.error(\"Error!\");});};console.log(trigger);useEffect(function(){AuthService.getStudents(batch,year).then(function(res){console.log(res);setTableData(res.data.students);}).catch(function(e){console.log(e);});},[trigger]);useEffect(function(){AuthService.getStudents(batch,year).then(function(res){console.log(res);setTableData(res.data.students);}).catch(function(e){console.log(e);});},[edit]);var handleApply=function handleApply(e){e.preventDefault();if(year&&batch){AuthService.getStudents(batch,year).then(function(res){console.log(res);setTableData(res.data.students);}).catch(function(e){console.log(e);});}else{// show error\ntoast.warn(\"Please Select Year and Batch\");}};useEffect(function(){loadBatch();},[year]);var loadBatch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return AuthService.getBatch(year);case 3:res=_context.sent;setBatches(res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function loadBatch(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-Container \".concat(val?\"activate\":\"\"),children:[/*#__PURE__*/_jsx(AddBatch,{trigger:flag1,setTrigger:setFlag1}),/*#__PURE__*/_jsx(EditDetails,{trigger:flag2,setTrigger:setFlag2}),/*#__PURE__*/_jsx(AddStudent,{trigger:flag3,setTrigger:setFlag3}),/*#__PURE__*/_jsxs(\"div\",{className:\"Batches-Details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Year-Dropdown\",children:/*#__PURE__*/_jsxs(\"select\",{id:\"year-drop\",onChange:handleYearDropdown,children:[/*#__PURE__*/_jsx(\"option\",{selected:\"selected\",hidden:true,children:\"Select Year\"}),years.map(function(y){return/*#__PURE__*/_jsx(\"option\",{name:y.id,value:y.id,children:y.yr},y.id);})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"Batch-Dropdown\",children:/*#__PURE__*/_jsxs(\"select\",{id:\"batch-drop\",disabled:flag,onChange:handleBatchDropdown,children:[/*#__PURE__*/_jsx(\"option\",{selected:\"selected\",hidden:true,children:\"Select Batch\"}),batches.map(function(b){return/*#__PURE__*/_jsx(\"option\",{name:b._id,value:b._id,children:b._id},b._id);})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"Apply-Button\",onClick:handleApply,children:/*#__PURE__*/_jsx(\"div\",{className:\"Apply-text\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Apply\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"Add-Batch\",onClick:handleBatch,children:/*#__PURE__*/_jsx(\"div\",{className:\"Batch-text\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Add Batch\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Add-Student\",onClick:handleStudent,children:[/*#__PURE__*/_jsx(\"div\",{className:\"plus-icon\",children:/*#__PURE__*/_jsx(\"box-icon\",{name:\"plus-circle\",color:\"#007BAB\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Add-Student-text\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Add student\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Student-Info-Table\",children:/*#__PURE__*/_jsx(TableContainer,{component:Paper,style:{width:val?\"81vw\":\"91vw\",position:\"relative\",top:\"10%\",height:\"80vh\"},children:/*#__PURE__*/_jsxs(Table,{style:{height:\"max-content\"},stickyHeader:true,children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{style:{border:\"0px solid transparent\",width:\"20%\",fontFamily:\"'Inter', sans-serif\"},align:\"center\",children:\"Roll Number\"}),/*#__PURE__*/_jsx(TableCell,{style:{border:\"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"},align:\"center\",children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{style:{border:\"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"},align:\"center\",children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{style:{border:\"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"},align:\"center\"}),/*#__PURE__*/_jsx(TableCell,{style:{border:\"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"},align:\"center\"}),/*#__PURE__*/_jsx(TableCell,{style:{border:\"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"},align:\"center\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:tableData.map(function(data){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{style:{border:\"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"},align:\"center\",children:data.roll}),/*#__PURE__*/_jsx(TableCell,{style:{border:\"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"},align:\"center\",children:data.name}),/*#__PURE__*/_jsx(TableCell,{style:{border:\"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"},align:\"center\",children:data.email}),/*#__PURE__*/_jsx(TableCell,{style:{border:\"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"},align:\"center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"Edit-details\",style:{color:\"#007BAB\",cursor:\"pointer\",fontFamily:\"'Inter', sans-serif\"},onClick:function onClick(){return handleEditDetails(data._id);},children:/*#__PURE__*/_jsx(\"h6\",{children:\"Edit details\"})})}),/*#__PURE__*/_jsx(TableCell,{style:{border:\"0px solid transparent\"},align:\"center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"Edit-details\",style:{color:\"#007BAB\",cursor:\"pointer\",fontFamily:\"'Inter', sans-serif\"},onClick:function onClick(){return handleView(data._id);},children:/*#__PURE__*/_jsx(\"h6\",{children:\"View\"})})}),/*#__PURE__*/_jsx(TableCell,{style:{border:\"0px solid transparent\"},align:\"center\",onClick:function onClick(){return handleDelete(data._id);},children:/*#__PURE__*/_jsx(\"div\",{className:\"trash-icon\",style:{cursor:\"pointer\"},children:/*#__PURE__*/_jsx(\"box-icon\",{color:\"red\",name:\"trash-alt\"})})})]})});})})]})})}),/*#__PURE__*/_jsx(Toaster,{})]});};export default AdminBatches;","map":{"version":3,"sources":["E:/project1/project/src/src/Pages/Dashboard/Admin/Batches/AdminBatches.js"],"names":["React","useEffect","useState","useSelector","useDispatch","Paper","TableContainer","TableBody","Table","TableHead","TableCell","TableRow","AddBatch","useNavigate","EditDetails","AuthService","Toaster","AddStudent","actioncreators","toast","AdminBatches","state","toggle","val","year","setYear","flag1","setFlag1","trigger","setTrigger","flag3","setFlag3","flag2","setFlag2","batch","setBatch","tableData","setTableData","dispatch","navigate","edit","console","log","flag","setFlag","years","id","yr","batches","setBatches","handleYearDropdown","e","target","value","handleBatch","preventDefault","handleEditDetails","localStorage","setItem","Edit","handleBatchDropdown","handleView","handleStudent","handleDelete","DelStudent","then","res","success","catch","error","getStudents","data","students","handleApply","warn","loadBatch","getBatch","map","y","b","_id","width","position","top","height","border","fontFamily","roll","name","email","color","cursor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport 'boxicons'\r\nimport { Paper, TableContainer, TableBody, Table, TableHead, TableCell, TableRow } from \"@material-ui/core\"\r\nimport './Batches.css'\r\nimport AddBatch from './AddBatch'\r\nimport  {  useNavigate  } from 'react-router-dom'\r\nimport EditDetails from './EditDetails'\r\nimport AuthService from '../../../../ApiServices/AuthService';\r\nimport Toaster from '../../../../Components/UI/Toaster/Toaster'\r\nimport AddStudent from './AddStudent'\r\nimport * as actioncreators from '../../../../Service/Action/FacultyAction'\r\nimport { toast } from 'react-toastify';\r\nconst AdminBatches = () => {\r\n    const { val } = useSelector((state) => state.toggle);\r\n    const [year, setYear] = useState(null);\r\n    const [flag1, setFlag1] = useState(false);\r\n    const [trigger, setTrigger] = useState(false);\r\n    const [flag3,setFlag3] = useState(false);\r\n    const [flag2, setFlag2] = useState(false);\r\n    const [batch, setBatch] = useState(null);\r\n    const [tableData, setTableData] = useState([])\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n    const { edit } = useSelector((state) => state.edit);\r\n    console.log(edit);\r\n    const [flag, setFlag] = useState(true);\r\n    const years = [{ id: \"1\", yr: \"First\" }, { id: \"2\", yr: \"Second\" }, { id: \"3\", yr: \"Third\" }, { id: \"4\", yr: \"Fourth\" }];\r\n    const [batches , setBatches] = useState([]);\r\n    const handleYearDropdown = (e) => {\r\n        setYear(e.target.value);\r\n        console.log(e.target.value);\r\n        setFlag(false);\r\n    }\r\n    const handleBatch = (e) =>{\r\n        e.preventDefault();\r\n        setBatch(e.target.value);\r\n        setFlag1(true);\r\n    }\r\n    const handleEditDetails =  (id) =>{\r\n        localStorage.setItem(\"studentid\",id);\r\n        dispatch(actioncreators.Edit(true))\r\n        setFlag2(true);\r\n    }\r\n    const handleBatchDropdown = (e) => {\r\n        setBatch(e.target.value);\r\n    }\r\n\r\n    const handleView = (id) => {\r\n        localStorage.setItem(\"stuid\",id);\r\n        navigate(\"/Dashboard/stuProfile\");\r\n    }\r\n\r\n    const handleStudent = (e) =>{\r\n            e.preventDefault();\r\n            setFlag3(true);\r\n    }\r\n\r\n    const handleDelete = (id) => {\r\n        setTrigger(true);\r\n        console.log(trigger);\r\n        AuthService.DelStudent(id)\r\n            .then((res)=>{\r\n                console.log(res);\r\n                if(res){\r\n                    toast.success(\"Student Deleted Successfully\")\r\n                }\r\n                setTrigger(false);\r\n                console.log(trigger);\r\n            }).catch((e)=>{\r\n                console.log(e);\r\n                toast.error(\"Error!\")\r\n            })\r\n    }\r\n    console.log(trigger);\r\n    useEffect(()=>{\r\n        AuthService.getStudents(batch,year)\r\n            .then((res)=>{\r\n                console.log(res);\r\n                setTableData(res.data.students);\r\n            }).catch((e)=>{\r\n                console.log(e);\r\n            })\r\n     },[trigger]);\r\n     useEffect(()=>{\r\n        AuthService.getStudents(batch,year)\r\n            .then((res)=>{\r\n                console.log(res);\r\n                setTableData(res.data.students);\r\n            }).catch((e)=>{\r\n                console.log(e);\r\n            })\r\n     },[edit]);\r\n\r\n    const handleApply = (e) =>{\r\n        e.preventDefault();\r\n        if(year && batch){\r\n\r\n        \r\n            AuthService.getStudents(batch,year)\r\n            .then((res)=>{\r\n                console.log(res);\r\n                setTableData(res.data.students);\r\n            }).catch((e)=>{\r\n                console.log(e);\r\n            })\r\n        }else{\r\n            // show error\r\n            toast.warn(\"Please Select Year and Batch\")\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        loadBatch();\r\n    },[year]);\r\n\r\n    const loadBatch = async ()=> {\r\n        try {\r\n            const res = await AuthService.getBatch(year);\r\n            setBatches(res.data);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        \r\n    }\r\n\r\n    return (\r\n        <div className={`Admin-Container ${val ? \"activate\" : \"\"}`}>\r\n        {\r\n            <AddBatch trigger={flag1} setTrigger={setFlag1} />\r\n        }\r\n        {\r\n            <EditDetails trigger={flag2} setTrigger={setFlag2} />\r\n        }\r\n        {\r\n            \r\n            <AddStudent trigger={flag3} setTrigger={setFlag3} />\r\n        }\r\n            <div className='Batches-Details'>\r\n                <div className='Year-Dropdown'>\r\n                    <select id=\"year-drop\" onChange={handleYearDropdown}>\r\n                        <option selected=\"selected\" hidden>Select Year</option>\r\n                        {\r\n                            years.map((y) => (\r\n                                <option key={y.id} name={y.id} value={y.id}>{y.yr}</option>\r\n                            ))\r\n                        }\r\n                    </select>\r\n                </div>\r\n                <div className='Batch-Dropdown'>\r\n                    <select id=\"batch-drop\" disabled={flag} onChange={handleBatchDropdown}>\r\n                        <option selected=\"selected\" hidden>Select Batch</option>\r\n                        {\r\n                            batches.map((b) => (\r\n                                <option key={b._id} name={b._id} value={b._id}>{b._id}</option>\r\n                            ))\r\n                        }\r\n                    </select>\r\n                </div>\r\n                <div className='Apply-Button' onClick={handleApply}>\r\n                    <div className='Apply-text'>\r\n                        <h4>Apply</h4>\r\n                    </div>\r\n                </div>\r\n                <div className='Add-Batch' onClick={handleBatch}>\r\n                    <div className='Batch-text'>\r\n                        <h4>Add Batch</h4>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className='Add-Student' onClick={handleStudent}>\r\n                <div className='plus-icon'>\r\n                    <box-icon name='plus-circle' color=\"#007BAB\" ></box-icon>\r\n                </div>\r\n                <div className='Add-Student-text'>\r\n                    <h4>Add student</h4>\r\n                </div>\r\n            </div>\r\n            <div className='Student-Info-Table'>\r\n\r\n                <TableContainer component={Paper} style={{\r\n                    width: val ? \"81vw\" : \"91vw\",\r\n                    position: \"relative\",\r\n                    top: \"10%\",\r\n                    height:\"80vh\"\r\n\r\n                }} >\r\n                    <Table style={{height: \"max-content\"}} stickyHeader>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell style={{ border: \"0px solid transparent\", width: \"20%\",fontFamily:\"'Inter', sans-serif\"  }} align='center'>Roll Number</TableCell>\r\n                                <TableCell style={{ border: \"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"  }} align='center'>Name</TableCell>\r\n                                <TableCell style={{ border: \"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"  }} align='center'>Email</TableCell>\r\n                                <TableCell style={{ border: \"0px solid transparent\" ,fontFamily:\"'Inter', sans-serif\" }} align='center'></TableCell>\r\n                                <TableCell style={{ border: \"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"  }} align='center'></TableCell>\r\n                                <TableCell style={{ border: \"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"  }} align='center'></TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n\r\n                            {\r\n                                tableData.map((data) => (<>\r\n                                    <TableRow>\r\n                                        <TableCell style={{ border: \"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"  }} align='center'>{data.roll}</TableCell>\r\n                                        <TableCell style={{ border: \"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"  }} align='center'>{data.name}</TableCell>\r\n                                        <TableCell style={{ border: \"0px solid transparent\" ,fontFamily:\"'Inter', sans-serif\" }} align='center'>{data.email}</TableCell>\r\n                                        <TableCell style={{ border: \"0px solid transparent\",fontFamily:\"'Inter', sans-serif\"  }} align='center'>\r\n                                            <div className='Edit-details' style={{ color: \"#007BAB\", cursor: \"pointer\",fontFamily:\"'Inter', sans-serif\"  }} onClick={()=>handleEditDetails(data._id)}>\r\n                                                <h6>Edit details</h6>\r\n                                            </div>\r\n                                        </TableCell>\r\n                                        <TableCell style={{ border: \"0px solid transparent\" }} align='center'>\r\n                                            <div className='Edit-details' style={{ color: \"#007BAB\", cursor: \"pointer\",fontFamily:\"'Inter', sans-serif\" }} onClick={()=>handleView(data._id)} >\r\n                                                <h6>View</h6>\r\n                                            </div>\r\n                                        </TableCell>\r\n                                        <TableCell style={{ border: \"0px solid transparent\" }} align='center' onClick={()=>handleDelete(data._id)}>\r\n                                            <div className='trash-icon' style={{cursor:\"pointer\"}}>\r\n                                                <box-icon color=\"red\" name='trash-alt' />\r\n                                            </div>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                </>))\r\n                            }\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n\r\n            </div>\r\n            <Toaster />\r\n        </div>);\r\n};\r\n\r\nexport default AdminBatches;\r\n"]},"metadata":{},"sourceType":"module"}