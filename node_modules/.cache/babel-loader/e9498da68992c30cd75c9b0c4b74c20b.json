{"ast":null,"code":"import _objectSpread from\"E:/project1/project/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/project1/project/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Image from'../../../Components/UI/Images/Image';import SubmitButton from'../../../Components/UI/Button/Button';import{useForm}from'react-hook-form';import illustrate from'../../../Assets/Images/forgot.png';import'../Login/Login.css';import AuthService from'../../../ApiServices/AuthService';import{useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import Toaster from'../../../Components/UI/Toaster/Toaster';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Spinner from'../../../Components/UI/Spinner/Spinner';import OtpTimer from'otp-timer';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OTP=function OTP(){var _errors$otp;var _useForm=useForm({mode:\"onTouched\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,reset=_useForm.reset;var navigate=useNavigate();useEffect(function(){if(localStorage.getItem(\"userd\")===null||localStorage.getItem(\"userd\")===undefined){navigate('/');}},[]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var mystate=useSelector(function(state){return state.emailReducer.email;});var onSubmit=function onSubmit(data,e){e.preventDefault();setLoading(true);var obj={email:mystate,otp:data.otp};AuthService.otp(obj).then(function(res){if(res.status===200){setLoading(false);toast.success(\"Verified Successfully\");console.log(res);navigate(\"/createpass\");}}).catch(function(error){console.log(error);console.log(error.response);setLoading(false);if(error.response.status===422){toast.warn(\"otp expired\");}else if(error.response.status===420){toast.warn(\"Wrong otp\");}else if(error.response.status===500){toast.error(\"Time out!\");}else{navigate(\"/Page404\");}});reset();};var handleClick=function handleClick(){setLoading(true);var object={email:mystate};console.log(object);AuthService.resendotp(object).then(function(res){if(res.status===200){setLoading(false);toast.success(\"otp sent\");console.log(res);}}).catch(function(error){setLoading(false);console.log(error);if(error.response.status===500){toast.error(\"Time out!\");}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"Container\",children:[loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(\"div\",{className:\"illustration-box\",children:/*#__PURE__*/_jsx(Image,{imge:illustrate})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"Login-Box\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"Heading1\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"Login-Heading\",children:\"OTP Verification\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"para3\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Enter One Time Password(OTP) sent to your email.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"type-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input1\",style:{paddingBottom:\"14px\"},children:/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field\",size:\"44\",type:\"text\",placeholder:\"Confirmation code\",name:\"otp\"},register(\"otp\",{required:\"**OTP is required\"})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$otp=errors.otp)===null||_errors$otp===void 0?void 0:_errors$otp.message}),/*#__PURE__*/_jsx(\"div\",{className:\"Button\",children:/*#__PURE__*/_jsx(SubmitButton,{className:\"Login-Button\",Label:\"Login\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Forgot-text\",children:/*#__PURE__*/_jsx(OtpTimer,{minutes:0,seconds:59,resend:handleClick,text:\"Resend OTP in\",ButtonText:\"Resend OTP\",textColor:\"#1F5B7C\",buttonColor:\"#1F5B7C\",background:\"#ffffff\"})})]})}),/*#__PURE__*/_jsx(Toaster,{})]});};export default OTP;","map":{"version":3,"sources":["E:/project1/project/src/src/Pages/Auth/OTP/OTP.js"],"names":["React","useState","useEffect","Image","SubmitButton","useForm","illustrate","AuthService","useSelector","useNavigate","Toaster","toast","Spinner","OtpTimer","OTP","mode","register","handleSubmit","errors","formState","reset","navigate","localStorage","getItem","undefined","loading","setLoading","mystate","state","emailReducer","email","onSubmit","data","e","preventDefault","obj","otp","then","res","status","success","console","log","catch","error","response","warn","handleClick","object","resendotp","paddingBottom","required","message"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react'\r\nimport Image from '../../../Components/UI/Images/Image'\r\nimport SubmitButton from '../../../Components/UI/Button/Button'\r\nimport { useForm } from 'react-hook-form'\r\nimport illustrate from '../../../Assets/Images/forgot.png'\r\nimport '../Login/Login.css'\r\nimport AuthService from '../../../ApiServices/AuthService'\r\nimport {useSelector} from 'react-redux'\r\nimport  {  useNavigate  } from 'react-router-dom'\r\nimport Toaster from '../../../Components/UI/Toaster/Toaster'\r\nimport {toast} from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Spinner from '../../../Components/UI/Spinner/Spinner'\r\nimport OtpTimer from 'otp-timer'\r\nconst OTP = () => {\r\n    const { register, handleSubmit, formState: { errors }, reset } = useForm({\r\n        mode: \"onTouched\"\r\n    });\r\n    const navigate = useNavigate();\r\n    useEffect(()=>{\r\n        if(localStorage.getItem(\"userd\") === null || localStorage.getItem(\"userd\") === undefined){\r\n            navigate('/');\r\n        }\r\n    },[]) \r\n    const [loading, setLoading] = useState(false)\r\n    const mystate = useSelector((state)=>state.emailReducer.email)\r\n    const onSubmit = (data,e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        let obj={\r\n            email:mystate,\r\n            otp:data.otp\r\n        }\r\n        AuthService.otp(obj)\r\n        .then((res)=>{\r\n            if(res.status===200){\r\n                setLoading(false);\r\n                toast.success(\"Verified Successfully\");\r\n                console.log(res);\r\n                navigate(\"/createpass\")\r\n            }\r\n            \r\n        }).catch((error)=>{\r\n            console.log(error);\r\n            console.log(error.response);\r\n            setLoading(false);\r\n            if(error.response.status === 422){\r\n                toast.warn(\"otp expired\");\r\n            }\r\n            else if(error.response.status === 420){\r\n                toast.warn(\"Wrong otp\");\r\n            }\r\n            else if(error.response.status === 500){\r\n                toast.error(\"Time out!\");\r\n            }\r\n            else{\r\n                navigate(\"/Page404\");\r\n            }\r\n        })\r\n        reset();\r\n    }\r\n    \r\n\r\n    const handleClick = ()=>{\r\n        setLoading(true);\r\n        const object={\r\n            email:mystate,\r\n        }\r\n        console.log(object);\r\n        AuthService.resendotp(object)\r\n        .then((res)=>{\r\n            if(res.status===200){\r\n                setLoading(false);\r\n                toast.success(\"otp sent\");\r\n                console.log(res);\r\n                \r\n            }\r\n            \r\n        }).catch((error)=>{\r\n            setLoading(false);\r\n            console.log(error);\r\n            if(error.response.status === 500){\r\n                toast.error(\"Time out!\");\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className='Container'>\r\n         {\r\n            loading && <Spinner />\r\n        }\r\n            <div className='illustration-box'>\r\n                <Image imge={illustrate}/>\r\n            </div>\r\n            <div>\r\n                <form className='Login-Box' onSubmit={handleSubmit(onSubmit)}>\r\n                    <div className='Heading1'>\r\n                        <h1 className='Login-Heading'>OTP Verification</h1>\r\n                    </div>\r\n                    <div className='para3'>\r\n                        <p>Enter One Time Password(OTP) sent to your email.</p>\r\n                    </div>\r\n                    <div className='type-box'>\r\n                        <div className='input1' style={{paddingBottom:\"14px\"}}>\r\n                            <input className='input-field' size={\"44\"} type=\"text\" placeholder='Confirmation code' name=\"otp\" {...register(\"otp\", { required: \"**OTP is required\" })}></input>\r\n                        </div>\r\n                        <p className='alerts'>{errors.otp?.message}</p>\r\n                        <div className='Button'>\r\n                            <SubmitButton className=\"Login-Button\" Label=\"Login\" ></SubmitButton>\r\n                        </div>\r\n                    </div>\r\n                    <div className='Forgot-text'>\r\n                    <OtpTimer minutes={0} seconds= {59} resend={handleClick} text=\"Resend OTP in\" ButtonText=\"Resend OTP\" textColor={\"#1F5B7C\"} buttonColor={\"#1F5B7C\"} background={\"#ffffff\"} />\r\n                    </div>\r\n                   \r\n                </form>\r\n\r\n            </div>\r\n                    <Toaster />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OTP\r\n"]},"metadata":{},"sourceType":"module"}