{"ast":null,"code":"import _objectSpread from\"E:/College-ERP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/College-ERP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Image from'../../../Components/UI/Images/Image';import SubmitButton from'../../../Components/UI/Button/Button';import{useForm}from'react-hook-form';import'../Login/Login.css';import illustrate from'../../../Assets/Images/forgot.png';import'./Forgot.css';import{useNavigate}from'react-router-dom';import AuthService from'../../../ApiServices/AuthService';import*as actionCreators from\"../../../Service/Action/action\";import{useDispatch}from'react-redux';import Toaster from'../../../Components/UI/Toaster/Toaster';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Spinner from'../../../Components/UI/Spinner/Spinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Forgotpassword=function Forgotpassword(){var _errors$email;var navigate=useNavigate();var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var mystate=localStorage.getItem(\"userd\");var _useForm=useForm({mode:\"onTouched\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,reset=_useForm.reset;useEffect(function(){if(localStorage.getItem(\"userd\")===null||localStorage.getItem(\"userd\")===undefined){navigate('/');}},[]);var onSubmit=function onSubmit(data,e){e.preventDefault();console.log(data);setLoading(true);AuthService.forgot(mystate,data).then(function(res){if(res.status===200){setLoading(false);dispatch(actionCreators.userEmail(data.email));toast.success(\"otp sent\");console.log(res);navigate('/otp');}}).catch(function(error){console.log(error);console.log(error.response);setLoading(false);if(error.response.status===400){toast.error(\"invalid user\");}else if(error.response.status===500){toast.error(\"network Error!\");}else{navigate(\"/Page404\");}});reset();};return/*#__PURE__*/_jsxs(\"div\",{className:\"Container\",children:[loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(\"div\",{className:\"illustration-box\",children:/*#__PURE__*/_jsx(Image,{imge:illustrate})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"Login-Box\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"Heading2\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"Login-Heading\",children:\"Forgot Password\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"type-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"para2\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Please provide the email address you have been given to log in.\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Label1\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input1\",children:[/*#__PURE__*/_jsx(\"i\",{id:\"emailicon\",className:\"fa fa-envelope icon\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field\",size:\"44\",type:\"email\",placeholder:\"example@akgec.ac.in\",name:\"email\"},register(\"email\",{required:\"**Email is required\",pattern:{value:/^[a-zA-Z0-9_\\-]{4,}[@][a][k][g][e][c][\\.][a][c][\\.][i][n]$/i,message:\"**This is not a valid email\"}})))]}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message}),/*#__PURE__*/_jsx(\"div\",{className:\"Button\",children:/*#__PURE__*/_jsx(SubmitButton,{className:\"Next-Button\",Label:\"Next\"})})]})]})}),/*#__PURE__*/_jsx(Toaster,{})]});};export default Forgotpassword;","map":{"version":3,"sources":["E:/College-ERP/src/Pages/Auth/Forgot/ForgotPassword.js"],"names":["React","useState","useEffect","Image","SubmitButton","useForm","illustrate","useNavigate","AuthService","actionCreators","useDispatch","Toaster","toast","Spinner","Forgotpassword","navigate","dispatch","loading","setLoading","mystate","localStorage","getItem","mode","register","handleSubmit","errors","formState","reset","undefined","onSubmit","data","e","preventDefault","console","log","forgot","then","res","status","userEmail","email","success","catch","error","response","required","pattern","value","message"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport Image from '../../../Components/UI/Images/Image'\r\nimport SubmitButton from '../../../Components/UI/Button/Button'\r\nimport { useForm } from 'react-hook-form'\r\nimport '../Login/Login.css'\r\nimport illustrate from '../../../Assets/Images/forgot.png'\r\nimport './Forgot.css'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport AuthService from '../../../ApiServices/AuthService'\r\nimport * as actionCreators from \"../../../Service/Action/action\";\r\nimport { useDispatch } from 'react-redux'\r\nimport Toaster from '../../../Components/UI/Toaster/Toaster'\r\nimport {toast} from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Spinner from '../../../Components/UI/Spinner/Spinner'\r\nconst Forgotpassword = () => {\r\n    const navigate = useNavigate();\r\n    const dispatch = useDispatch();\r\n    const [loading, setLoading] = useState(false)\r\n    const mystate = localStorage.getItem(\"userd\")\r\n    const { register, handleSubmit, formState: { errors }, reset } = useForm({\r\n        mode: \"onTouched\"\r\n    });\r\n    useEffect(()=>{\r\n        if(localStorage.getItem(\"userd\") === null || localStorage.getItem(\"userd\") === undefined){\r\n            navigate('/');\r\n        }\r\n    },[])\r\n    const onSubmit = (data, e) => {\r\n        e.preventDefault();\r\n        console.log(data);\r\n        setLoading(true);\r\n        AuthService.forgot(mystate, data)\r\n            .then((res) => {\r\n                if (res.status === 200) {\r\n                    setLoading(false);\r\n                    dispatch(actionCreators.userEmail(data.email));\r\n                    toast.success(\"otp sent\");\r\n                    console.log(res);\r\n                    navigate('/otp');\r\n                }\r\n\r\n            }).catch((error) => {\r\n                console.log(error);\r\n                console.log(error.response);\r\n                setLoading(false);\r\n                if (error.response.status === 400) {\r\n                    toast.error(\"invalid user\");\r\n                }\r\n                else if (error.response.status === 500) {\r\n                    toast.error(\"network Error!\");\r\n                }\r\n                else {\r\n                    navigate(\"/Page404\");\r\n                }\r\n            })\r\n        reset();\r\n    }\r\n\r\n    return (\r\n        <div className='Container'>\r\n        {\r\n            loading && <Spinner />\r\n        }\r\n            <div className='illustration-box'>\r\n                <Image imge={illustrate} />\r\n            </div>\r\n            <div>\r\n                <form className='Login-Box' onSubmit={handleSubmit(onSubmit)}>\r\n                    <div className='Heading2'>\r\n                        <h1 className='Login-Heading'>Forgot Password</h1>\r\n                    </div>\r\n                    <div className='type-box'>\r\n                        <div className='para2'>\r\n                            <p>Please provide the email address you have been given to log in.</p>\r\n                        </div>\r\n                        <div className='Label1'>\r\n                            <label htmlFor=\"email\">\r\n                                Email\r\n                            </label>\r\n                        </div>\r\n                        <div className='input1'>\r\n                            <i id=\"emailicon\" className=\"fa fa-envelope icon\"></i>\r\n                            <input className='input-field' size={\"44\"} type=\"email\" placeholder='example@akgec.ac.in' name=\"email\" {...register(\"email\", { required: \"**Email is required\", pattern: { value: /^[a-zA-Z0-9_\\-]{4,}[@][a][k][g][e][c][\\.][a][c][\\.][i][n]$/i, message: \"**This is not a valid email\" } })}></input>\r\n                        </div>\r\n                        <p className='alerts'>{errors.email?.message}</p>\r\n                        <div className='Button'>\r\n                            <SubmitButton className=\"Next-Button\" Label=\"Next\" ></SubmitButton>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n\r\n            </div>\r\n                <Toaster />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Forgotpassword\r\n"]},"metadata":{},"sourceType":"module"}