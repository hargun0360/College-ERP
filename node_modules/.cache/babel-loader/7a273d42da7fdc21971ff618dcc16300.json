{"ast":null,"code":"import _objectSpread from\"E:/College-ERP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/College-ERP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Image from'../../../Components/UI/Images/Image';import SubmitButton from'../../../Components/UI/Button/Button';import{useForm}from'react-hook-form';import illustrate from'../../../Assets/Images/login.png';import AuthService from'../../../ApiServices/AuthService';import'./Login.css';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import*as actionCreators from\"../../../Service/Action/action\";import{useNavigate}from'react-router-dom';import Toaster from'../../../Components/UI/Toaster/Toaster';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Spinner from'../../../Components/UI/Spinner/Spinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _errors$email,_errors$password;var dispatch=useDispatch();var user=localStorage.getItem(\"userd\");var mystate=useSelector(function(state){return state.emailReducer.user;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),toggle=_useState2[0],setToggle=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useForm=useForm({mode:\"onTouched\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,reset=_useForm.reset;var navigate=useNavigate();useEffect(function(){if(localStorage.getItem(\"userd\")===null||localStorage.getItem(\"userd\")===undefined){navigate('/');}},[]);console.log(mystate);var onSubmit=function onSubmit(data,e){e.preventDefault();console.log(e);var loginas=localStorage.getItem(\"userd\");console.log(data);setLoading(true);AuthService.login(loginas,data).then(function(res){if(res.status===201){setLoading(false);console.log(res);localStorage.setItem(\"user\",res.data.accessToken);localStorage.setItem(\"ref_token\",res.data.refreshToken);localStorage.setItem(\"userid\",res.data.result._id);dispatch(actionCreators.userEmail(res.data.email));navigate(\"/\".concat(user,\"/Dashboard/profile\"));}}).catch(function(error){console.log(error);console.log(error.response);setLoading(false);if(error.response.status===404){toast.error(\"Invalid User\");}else if(error.response.status===403){toast.warn(\"incorrect password\");}else if(error.response.status===302){toast.warn(\"user is not admin\");}else{navigate(\"/page404\");}});reset();};return/*#__PURE__*/_jsxs(\"div\",{className:\"Container\",children:[loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(\"div\",{className:\"illustration-box\",children:/*#__PURE__*/_jsx(Image,{imge:illustrate})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"Login-Box\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"div\",{className:\"Heading1\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"Login-Heading\",children:\"Welcome Back\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"para1\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Please use the account you have been given to log in\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"type-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label1\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input1\",children:[/*#__PURE__*/_jsx(\"i\",{id:\"emailicon\",className:\"fa fa-envelope icon\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field\",size:\"44\",type:\"email\",placeholder:\"example@akgec.ac.in\",name:\"email\"},register(\"email\",{required:\"**Email is required\",pattern:{value:/^[a-zA-Z0-9_\\-]{4,}[@][a][k][g][e][c][\\.][a][c][\\.][i][n]$/i,message:\"**This is not a valid email\"}})))]}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message}),/*#__PURE__*/_jsx(\"div\",{className:\"Label2\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input2\",children:[/*#__PURE__*/_jsx(\"i\",{id:\"passlock\",className:\"fa fa-lock icon\"}),toggle?/*#__PURE__*/_jsx(\"i\",{id:\"showpass\",className:\"fa fa-eye-slash icon\",onClick:function onClick(){setToggle(!toggle);}}):/*#__PURE__*/_jsx(\"i\",{id:\"showpass\",className:\"fa fa-eye icon\",onClick:function onClick(){setToggle(!toggle);}}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field\",size:\"44\",type:toggle?\"text\":\"password\",placeholder:\"Password\",name:\"password\"},register(\"password\",{required:\"**Password is required\",minLength:{value:8,message:\"**Password must be more than 8 characters\"},maxLength:{value:14,message:\"**Password cannot exceed more than 14 characters\"}})))]}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message}),/*#__PURE__*/_jsx(\"div\",{className:\"Button\",children:/*#__PURE__*/_jsx(SubmitButton,{className:\"Login-Button\",Label:\"Login\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Forgot-text\",children:/*#__PURE__*/_jsxs(Link,{to:\"/forgot\",className:\"Linker\",children:[\" \",/*#__PURE__*/_jsx(\"p\",{className:\"Forgotpassword-text\",children:\"Forgot Password?\"})]})})]})}),/*#__PURE__*/_jsx(Toaster,{})]});};export default Login;","map":{"version":3,"sources":["E:/College-ERP/src/Pages/Auth/Login/Login.js"],"names":["React","useState","useEffect","Image","SubmitButton","useForm","illustrate","AuthService","Link","useDispatch","useSelector","actionCreators","useNavigate","Toaster","toast","Spinner","Login","dispatch","user","localStorage","getItem","mystate","state","emailReducer","toggle","setToggle","loading","setLoading","mode","register","handleSubmit","errors","formState","reset","navigate","undefined","console","log","onSubmit","data","e","preventDefault","loginas","login","then","res","status","setItem","accessToken","refreshToken","result","_id","userEmail","email","catch","error","response","warn","required","pattern","value","message","minLength","maxLength","password"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react'\r\nimport Image from '../../../Components/UI/Images/Image'\r\nimport SubmitButton from '../../../Components/UI/Button/Button'\r\nimport { useForm } from 'react-hook-form'\r\nimport illustrate from '../../../Assets/Images/login.png'\r\nimport AuthService from '../../../ApiServices/AuthService'\r\nimport './Login.css'\r\nimport { Link } from 'react-router-dom'\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport * as actionCreators from \"../../../Service/Action/action\";\r\nimport  {  useNavigate  } from 'react-router-dom'\r\nimport Toaster from '../../../Components/UI/Toaster/Toaster'\r\nimport {toast} from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Spinner from '../../../Components/UI/Spinner/Spinner'\r\nconst Login = () => {\r\n    const dispatch = useDispatch();\r\n    const user = localStorage.getItem(\"userd\");\r\n    const mystate = useSelector((state)=>state.emailReducer.user)\r\n    const [toggle, setToggle] = useState(false);\r\n    const [loading, setLoading] = useState(false)\r\n    const { register, handleSubmit, formState: { errors }, reset } = useForm({\r\n        mode: \"onTouched\"\r\n    });\r\n    const navigate = useNavigate();\r\n    useEffect(()=>{\r\n        if(localStorage.getItem(\"userd\") === null || localStorage.getItem(\"userd\") === undefined){\r\n            navigate('/');\r\n        }\r\n    },[])\r\n    console.log(mystate);\r\n    const onSubmit = (data,e) => {\r\n        e.preventDefault();\r\n        console.log(e);\r\n        let loginas=localStorage.getItem(\"userd\");\r\n        console.log(data);\r\n        setLoading(true);\r\n        AuthService.login(loginas,data)\r\n        .then((res)=>{\r\n            if(res.status===201){\r\n                setLoading(false);\r\n                console.log(res);\r\n            localStorage.setItem(\"user\",res.data.accessToken);\r\n            localStorage.setItem(\"ref_token\",res.data.refreshToken);\r\n            localStorage.setItem(\"userid\",res.data.result._id);\r\n            dispatch(actionCreators.userEmail(res.data.email));\r\n            navigate(`/${user}/Dashboard/profile`);\r\n            }\r\n            \r\n        }).catch((error)=>{\r\n            console.log(error);\r\n            console.log(error.response);\r\n            setLoading(false);\r\n            if(error.response.status === 404){\r\n                toast.error(\"Invalid User\");\r\n            }\r\n            else if(error.response.status === 403){\r\n                toast.warn(\"incorrect password\");\r\n            }\r\n            else if(error.response.status === 302){\r\n                toast.warn(\"user is not admin\");\r\n            }\r\n            else{\r\n                navigate(\"/page404\")\r\n            }\r\n\r\n        })\r\n        reset();\r\n    }\r\n\r\n    return (\r\n        <div className='Container'>\r\n        {\r\n            loading && <Spinner />\r\n        }\r\n            <div className='illustration-box'>\r\n                <Image imge={illustrate}/>\r\n            </div>\r\n            <div>\r\n                <form className='Login-Box' onSubmit={handleSubmit(onSubmit)}>\r\n                    <div className='Heading1'>\r\n                        <h1 className='Login-Heading'>Welcome Back</h1>\r\n                    </div>\r\n                    <div className='para1'>\r\n                        <p>Please use the account you have been given to log in</p>\r\n                    </div>\r\n                    <div className='type-box'>\r\n                        <div className='Label1'>\r\n                            <label htmlFor=\"email\">\r\n                                Email\r\n                            </label>\r\n                        </div>\r\n                        <div className='input1'>\r\n                            <i id=\"emailicon\" className=\"fa fa-envelope icon\"></i>\r\n                            <input className='input-field' size={\"44\"} type=\"email\" placeholder='example@akgec.ac.in' name=\"email\" {...register(\"email\", { required: \"**Email is required\", pattern: { value: /^[a-zA-Z0-9_\\-]{4,}[@][a][k][g][e][c][\\.][a][c][\\.][i][n]$/i, message: \"**This is not a valid email\" } })}></input>\r\n                        </div>\r\n                        <p className='alerts'>{errors.email?.message}</p>\r\n                        <div className='Label2'>\r\n                            <label htmlFor=\"password\">\r\n                                Password\r\n                            </label>\r\n                        </div>\r\n                        <div className='input2'>\r\n                            <i id=\"passlock\" className=\"fa fa-lock icon\"></i>\r\n                            {\r\n                                toggle?<i id=\"showpass\" className=\"fa fa-eye-slash icon\" onClick={() => { setToggle(!toggle) }}></i>:<i id=\"showpass\" className=\"fa fa-eye icon\" onClick={() => { setToggle(!toggle) }}></i>\r\n                            }\r\n                            <input className='input-field' size={\"44\"} type={toggle ? \"text\" : \"password\"} placeholder='Password' name=\"password\" {...register(\"password\", { required: \"**Password is required\", minLength: { value: 8, message: \"**Password must be more than 8 characters\" }, maxLength: { value: 14, message: \"**Password cannot exceed more than 14 characters\" } })}></input>\r\n                        </div>\r\n                        <p className='alerts'>{errors.password?.message}</p>\r\n                        <div className='Button'>\r\n                            <SubmitButton className=\"Login-Button\" Label=\"Login\" ></SubmitButton>\r\n                        </div>\r\n                    </div>\r\n                    <div className='Forgot-text'>\r\n                    <Link to={\"/forgot\"} className='Linker' > <p className='Forgotpassword-text'>Forgot Password?</p></Link>\r\n                       \r\n                    </div>\r\n                </form>\r\n\r\n            </div>\r\n                <Toaster />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n"]},"metadata":{},"sourceType":"module"}