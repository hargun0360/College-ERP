{"ast":null,"code":"import _objectSpread from\"E:/project1/project/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:/project1/project/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/project1/project/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/project1/project/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import SubmitButton from'../../../../Components/UI/Button/Button';import{set,useForm}from'react-hook-form';import*as actionCreators from\"../../../../Service/Action/FacultyAction\";import{useDispatch,useSelector}from'react-redux';import{toast}from'react-toastify';import Toaster from'../../../../Components/UI/Toaster/Toaster';import AuthService from'../../../../ApiServices/AuthService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditDetails=function EditDetails(props){var _errors$email;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useForm=useForm({mode:\"onTouched\",defaultValues:{email:email}}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,reset=_useForm.reset;var dispatch=useDispatch();var id=localStorage.getItem(\"studentid\");if(id){console.log(id);}useEffect(function(){if(id){loadEmail();}},[reset]);var loadEmail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,obj;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return AuthService.getEachStudent(id);case 3:res=_context.sent;console.log(res);setEmail(res.data.profile.email);obj={email:res.data.profile.email};reset(obj);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function loadEmail(){return _ref.apply(this,arguments);};}();var onSubmit=function onSubmit(data,e){e.preventDefault();var obj={email:data.email};AuthService.EditUser(obj,id).then(function(res){console.log(res);if(res){toast.success(\"Updated Successfully\");}dispatch(actionCreators.Edit(false));}).catch(function(e){console.log(e);});reset();};var handleClick=function handleClick(e){e.preventDefault();props.setTrigger(false);};return props.trigger?/*#__PURE__*/_jsxs(\"div\",{className:\"Modal-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"EditDetails-Form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"EditDetails-Heading\",style:{marginBottom:\"5%\"},children:/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Details\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"EditDetails-Form-Input\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",style:{margin:\"5% 0%\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Email\",children:\"Email\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"Input-detail1\",children:[/*#__PURE__*/_jsx(\"i\",{id:\"emailicon1\",className:\"fa fa-envelope icon\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form1\",size:\"32\",type:\"email\",placeholder:\"example@akgec.ac.in\",name:\"email\"},register(\"email\",{required:\"**Email is required\",pattern:{value:/^[a-zA-Z0-9_\\-]{4,}[@][a][k][g][e][c][\\.][a][c][\\.][i][n]$/i,message:\"**This is not a valid email\"}})))]}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"EditDetail-btn\",children:/*#__PURE__*/_jsx(SubmitButton,{className:\"EditDetail-button\",Label:\"Update\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"cross-icon\",children:/*#__PURE__*/_jsx(\"i\",{id:\"crossed\",className:\"fa fa-times\",onClick:handleClick})})]}),/*#__PURE__*/_jsx(Toaster,{})]}):null;};export default EditDetails;","map":{"version":3,"sources":["E:/project1/project/src/src/Pages/Dashboard/Admin/Batches/EditDetails.js"],"names":["React","useState","useEffect","SubmitButton","set","useForm","actionCreators","useDispatch","useSelector","toast","Toaster","AuthService","EditDetails","props","email","setEmail","mode","defaultValues","register","handleSubmit","errors","formState","reset","dispatch","id","localStorage","getItem","console","log","loadEmail","getEachStudent","res","data","profile","obj","onSubmit","e","preventDefault","EditUser","then","success","Edit","catch","handleClick","setTrigger","trigger","marginBottom","margin","required","pattern","value","message"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport SubmitButton from '../../../../Components/UI/Button/Button'\r\nimport { set, useForm } from 'react-hook-form'\r\nimport * as actionCreators from \"../../../../Service/Action/FacultyAction\";\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { toast } from 'react-toastify';\r\nimport Toaster from '../../../../Components/UI/Toaster/Toaster';\r\nimport AuthService from '../../../../ApiServices/AuthService'\r\nconst EditDetails = (props) => {\r\n    const [email , setEmail] = useState(\"\");\r\n    const { register, handleSubmit, formState: { errors }, reset } = useForm({\r\n        mode: \"onTouched\",\r\n        defaultValues:{\r\n            email:email\r\n        }\r\n    });\r\n    const dispatch = useDispatch();\r\n    const id=localStorage.getItem(\"studentid\");\r\n    if(id){\r\n        console.log(id);\r\n    }\r\n    \r\n    useEffect(()=>{\r\n        if(id){\r\n            loadEmail();\r\n        }\r\n            \r\n    },[reset])\r\n    const loadEmail = async () =>{\r\n        try {\r\n            const res = await AuthService.getEachStudent(id);\r\n            console.log(res);\r\n            setEmail(res.data.profile.email);\r\n            const obj = {\r\n                email:res.data.profile.email,\r\n            } \r\n            reset(obj)\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        \r\n    }\r\n    const onSubmit = (data, e) => {\r\n        e.preventDefault();\r\n        const obj = {\r\n            email:data.email\r\n        }\r\n        AuthService.EditUser(obj,id)\r\n        .then((res) => {\r\n            console.log(res);\r\n            if(res){\r\n                toast.success(\"Updated Successfully\")\r\n            }\r\n            dispatch(actionCreators.Edit(false))\r\n        }).catch((e)=>{\r\n            console.log(e);\r\n        })\r\n        reset();\r\n    }\r\n    const handleClick = (e) => {\r\n        e.preventDefault();\r\n        props.setTrigger(false);\r\n    }\r\n\r\n    return (props.trigger) ?  (\r\n        <div className='Modal-box'>\r\n            <div className='EditDetails-Form'>\r\n                <div className='EditDetails-Heading' style={{marginBottom:\"5%\"}}>\r\n                    <h2>Edit Details</h2>\r\n                </div>\r\n                <div>\r\n                    <form className='EditDetails-Form-Input' onSubmit={handleSubmit(onSubmit)}>\r\n                        <div className='combine-input' style={{margin:\"5% 0%\"}}>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Email\">\r\n                                    Email\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail1'>\r\n                                <i id=\"emailicon1\" className=\"fa fa-envelope icon\"></i>\r\n                                <input className='input-field-form1' size={\"32\"} type=\"email\" placeholder='example@akgec.ac.in' name=\"email\" {...register(\"email\", { required: \"**Email is required\", pattern: { value: /^[a-zA-Z0-9_\\-]{4,}[@][a][k][g][e][c][\\.][a][c][\\.][i][n]$/i, message: \"**This is not a valid email\" } })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.email?.message}</p>\r\n                        </div>\r\n                        <div className='EditDetail-btn'> \r\n                            <SubmitButton className=\"EditDetail-button\" Label=\"Update\" ></SubmitButton>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div className='cross-icon'>\r\n                    <i id=\"crossed\" className=\"fa fa-times\" onClick={handleClick} ></i>\r\n                </div>\r\n            </div>\r\n            <Toaster />\r\n        </div>\r\n    ) : null;\r\n}\r\n\r\nexport default EditDetails\r\n"]},"metadata":{},"sourceType":"module"}