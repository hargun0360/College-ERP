{"ast":null,"code":"import _objectSpread from\"E:/College-ERP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/College-ERP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import SubmitButton from'../../../../Components/UI/Button/Button';import{useForm}from'react-hook-form';import'../../Admin/AdminDetailForm.css';import DateTimeBox from'../../Annoucement/DateTimeBox';import'react-datepicker/dist/react-datepicker.css';import*as actionCreators from\"../../../../Service/Action/action\";import'./Annoucement.css';import{useDispatch,useSelector}from'react-redux';import Spinner from'../../../../Components/UI/Spinner/Spinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MakeAnnoucement=function MakeAnnoucement(props){var _errors$Announcement;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),batches=_useState2[0],setBatches=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),batch=_useState4[0],setBatch=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),flag=_useState6[0],setFlag=_useState6[1];var _useForm=useForm({mode:\"onTouched\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,reset=_useForm.reset;var edit=useSelector(function(state){return state.editAnnoucement;});var dispatch=useDispatch();var today=new Date();var dd=today.getDate();var mm=today.getMonth()+1;var yyyy=today.getFullYear();if(dd<10){dd='0'+dd;}if(mm<10){mm='0'+mm;}today=yyyy+'-'+mm+'-'+dd;var formatAMPM=function formatAMPM(time){var hours=time.getHours();var minutes=time.getMinutes();var ampm=hours>=12?'PM':'AM';hours=hours%12;hours=hours?hours:12;minutes=minutes<10?'0'+minutes:minutes;var strTime=hours+':'+minutes+' '+ampm;return strTime;};var onSubmit=function onSubmit(data,e){e.preventDefault();if(batch===null){setFlag(true);}else{var obj={date:today,time:formatAMPM(new Date()),announcement:data.Announcement,annfor:data.aopt};console.log(obj);// dispatch(actionCreators.addAnnoucementDetails(obj));\nreset();}};var handleClick=function handleClick(e){e.preventDefault();props.setTrigger(false);};var handleBatchDropdown=function handleBatchDropdown(e){setBatch(e.target.value);};return props.trigger?/*#__PURE__*/_jsx(\"div\",{className:\"Modal-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"Admin-Form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Admin-Form-Heading\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Announcement Details\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"Admin-Input\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(DateTimeBox,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Announcement\",children:\"Announcement\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-detail\",children:/*#__PURE__*/_jsx(\"textarea\",_objectSpread({className:\"input-field-form\",cols:40,rows:5,type:\"text\",name:\"Announcement\"},register(\"Announcement\",{required:\"**Announcement field is required\"})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$Announcement=errors.Announcement)===null||_errors$Announcement===void 0?void 0:_errors$Announcement.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Batchdrop\",children:/*#__PURE__*/_jsxs(\"select\",{id:\"batchdrop\",onChange:handleBatchDropdown,children:[/*#__PURE__*/_jsx(\"option\",{selected:\"selected\",hidden:true,children:\"Select Batch\"}),batches.map(function(b){return/*#__PURE__*/_jsx(\"option\",{name:b._id,value:b._id,children:b._id},b._id);})]})}),flag?/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:\"**Batch Required\"}):null,/*#__PURE__*/_jsx(\"div\",{className:\"Button-update\",children:/*#__PURE__*/_jsx(SubmitButton,{className:\"Admin-Update\",Label:\"Post\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"cross1\",children:/*#__PURE__*/_jsx(\"i\",{id:\"crossed\",className:\"fa fa-times\",onClick:handleClick})})]})}):null;};export default MakeAnnoucement;","map":{"version":3,"sources":["E:/College-ERP/src/Pages/Dashboard/Faculty/Annoucement/MakeAnnoucement.js"],"names":["React","useEffect","useState","SubmitButton","useForm","DateTimeBox","actionCreators","useDispatch","useSelector","Spinner","MakeAnnoucement","props","batches","setBatches","batch","setBatch","flag","setFlag","mode","register","handleSubmit","errors","formState","reset","edit","state","editAnnoucement","dispatch","today","Date","dd","getDate","mm","getMonth","yyyy","getFullYear","formatAMPM","time","hours","getHours","minutes","getMinutes","ampm","strTime","onSubmit","data","e","preventDefault","obj","date","announcement","Announcement","annfor","aopt","console","log","handleClick","setTrigger","handleBatchDropdown","target","value","trigger","required","message","map","b","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport SubmitButton from '../../../../Components/UI/Button/Button'\r\nimport { useForm } from 'react-hook-form'\r\nimport '../../Admin/AdminDetailForm.css'\r\nimport DateTimeBox from '../../Annoucement/DateTimeBox'\r\nimport 'react-datepicker/dist/react-datepicker.css'\r\nimport * as actionCreators from \"../../../../Service/Action/action\";\r\nimport './Annoucement.css'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Spinner from '../../../../Components/UI/Spinner/Spinner';\r\nconst MakeAnnoucement = (props) => {\r\n    const [batches, setBatches] = useState([]);\r\n    const [batch, setBatch] = useState(null);\r\n    const [flag,setFlag] = useState(false)\r\n    const { register, handleSubmit, formState: { errors }, reset } = useForm({\r\n        mode: \"onTouched\"\r\n    });\r\n    const edit = useSelector((state) => state.editAnnoucement);\r\n    const dispatch = useDispatch();\r\n    let today = new Date()\r\n    var dd = today.getDate();\r\n    var mm = today.getMonth() + 1;\r\n    var yyyy = today.getFullYear();\r\n    if (dd < 10) {\r\n        dd = '0' + dd;\r\n    }\r\n    if (mm < 10) {\r\n        mm = '0' + mm;\r\n    }\r\n    today = yyyy + '-' + mm + '-' + dd;\r\n    const formatAMPM = (time) => {\r\n        var hours = time.getHours();\r\n        var minutes = time.getMinutes();\r\n        var ampm = hours >= 12 ? 'PM' : 'AM';\r\n        hours = hours % 12;\r\n        hours = hours ? hours : 12;\r\n        minutes = minutes < 10 ? '0' + minutes : minutes;\r\n        var strTime = hours + ':' + minutes + ' ' + ampm;\r\n        return strTime;\r\n    }\r\n    const onSubmit = (data, e) => {\r\n        e.preventDefault();\r\n        if(batch===null){\r\n            setFlag(true)\r\n        }else{\r\n            const obj = {\r\n                date: today,\r\n                time: formatAMPM(new Date),\r\n                announcement: data.Announcement,\r\n                annfor: data.aopt,\r\n            }\r\n            console.log(obj);\r\n            // dispatch(actionCreators.addAnnoucementDetails(obj));\r\n            reset();\r\n        }\r\n        \r\n    }\r\n\r\n    const handleClick = (e) => {\r\n        e.preventDefault();\r\n        props.setTrigger(false);\r\n    }\r\n    const handleBatchDropdown = (e) => {\r\n        setBatch(e.target.value);\r\n    }\r\n\r\n    return (props.trigger) ? (\r\n        <div className='Modal-box'>\r\n            <div className='Admin-Form'>\r\n                <div className='Admin-Form-Heading'>\r\n                    <h2>Announcement Details</h2>\r\n                </div>\r\n                <div>\r\n                    <form className='Admin-Input' onSubmit={handleSubmit(onSubmit)}>\r\n                        <DateTimeBox />\r\n                        <div className='combine-input'>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Announcement\">\r\n                                    Announcement\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail'>\r\n                                <textarea className='input-field-form' cols={40} rows={5} type=\"text\" name=\"Announcement\" {...register(\"Announcement\", { required: \"**Announcement field is required\" })}></textarea>\r\n                            </div>\r\n                            <p className='alerts'>{errors.Announcement?.message}</p>\r\n                        </div>\r\n                        <div className='Batchdrop'>\r\n                            <select id=\"batchdrop\"  onChange={handleBatchDropdown}>\r\n                                <option selected=\"selected\" hidden>Select Batch</option>\r\n                                {\r\n                                    batches.map((b) => (\r\n                                        <option key={b._id} name={b._id} value={b._id}>{b._id}</option>\r\n                                    ))\r\n                                }\r\n                            </select>\r\n                        </div>\r\n                        {flag ? <p className='alerts'>**Batch Required</p> : null}\r\n                        <div className='Button-update'>\r\n                            <SubmitButton className=\"Admin-Update\" Label=\"Post\" ></SubmitButton>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div className='cross1'>\r\n                    <i id=\"crossed\" className=\"fa fa-times\" onClick={handleClick} ></i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    ) : null\r\n}\r\n\r\nexport default MakeAnnoucement\r\n"]},"metadata":{},"sourceType":"module"}