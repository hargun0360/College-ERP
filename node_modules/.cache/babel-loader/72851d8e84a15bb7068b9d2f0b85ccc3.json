{"ast":null,"code":"import _objectSpread from\"E:/project1/project/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/project1/project/src/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import SubmitButton from'../../../../Components/UI/Button/Button';import{useForm}from'react-hook-form';import Spinner from'../../../../Components/UI/Spinner/Spinner';import profile from'../../../../Assets/Images/Profile.png';import AuthService from'../../../../ApiServices/AuthService';import'./Profile.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StudentEditDetails=function StudentEditDetails(props){var _errors$fullname,_errors$email,_errors$mobilenumber,_errors$qualification,_errors$father,_errors$mother,_errors$address;var _useState=useState(profile),_useState2=_slicedToArray(_useState,2),avatar=_useState2[0],setAvatar=_useState2[1];var user=localStorage.getItem(\"userd\");var _useState3=useState(profile),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var id=localStorage.getItem(\"userid\");var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),email=_useState8[0],setEmail=_useState8[1];var _useState9=useState([{id:\"1\",batch:\"CSE\"},{id:\"2\",batch:\"IT\"},{id:\"3\",batch:\"ECE\"},{id:\"4\",batch:\"EN\"}]),_useState10=_slicedToArray(_useState9,2),branch=_useState10[0],setBranch=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),mobile=_useState12[0],setMobile=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),degree=_useState14[0],setDegree=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),loading=_useState16[0],setLoading=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),flag=_useState18[0],setFlag=_useState18[1];var _useState19=useState(profile),_useState20=_slicedToArray(_useState19,2),preview=_useState20[0],setPreview=_useState20[1];var _useForm=useForm({mode:\"onTouched\"// defaultValues: {\n//     fullname: name,\n//     email: email,\n//     mobilenumber: mobile,\n//     qualification: degree,\n// },\n}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,reset=_useForm.reset;var handleBranchDropdown=function handleBranchDropdown(e){setBranch(e.target.value);};var onSubmit=function onSubmit(data,e){e.preventDefault();var myForm=new FormData();myForm.set(\"fullname\",data.fullname);myForm.set(\"email\",data.email);myForm.set(\"mobile\",data.mobilenumber);myForm.set(\"degree\",data.qualification);myForm.set(\"image\",avatar);AuthService.updateAdminDetails(myForm,user,id).then(function(res){console.log(res);setFlag(false);}).catch(function(e){console.log(e);});e.target.reset();};var handleClick=function handleClick(e){e.preventDefault();props.setTrigger(false);};var handleChange=function handleChange(e){setFlag(true);console.log(e.target.files[0]);if(e.target.files&&e.target.files[0]){setAvatar(e.target.files[0]);setPreview(URL.createObjectURL(e.target.files[0]));setImage(URL.createObjectURL(e.target.files[0]));console.log(e.target.files[0]);}};return props.trigger?/*#__PURE__*/_jsx(\"div\",{className:\"Modal-box1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"Student-Form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Student-Form-Heading\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Fill Personal Details\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"Admin-Input\",encType:\"multipart/form-data\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Full-Name\",children:\"Full Name\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-detail\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form\",size:\"40\",type:\"text\",name:\"fullname\"},register(\"fullname\",{required:\"**Name is required\"})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$fullname=errors.fullname)===null||_errors$fullname===void 0?void 0:_errors$fullname.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Email\",children:\"Email\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"Input-detail1\",children:[/*#__PURE__*/_jsx(\"i\",{id:\"emailicon1\",className:\"fa fa-envelope icon\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form1\",size:\"38\",type:\"email\",placeholder:\"example@akgec.ac.in\",name:\"email\"},register(\"email\",{required:\"**Email is required\",pattern:{value:/^[a-zA-Z0-9_\\-]{4,}[@][a][k][g][e][c][\\.][a][c][\\.][i][n]$/i,message:\"**This is not a valid email\"}})))]}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Mobile\",children:\"Mobile Number\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-detail\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form\",size:\"40\",type:\"text\",name:\"mobilenumber\"},register(\"mobilenumber\",{required:\"**Mobile Number is required\",pattern:{value:/^[6789][0-9]{9}$/i,message:\"**This is not a valid mobile number\"}})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$mobilenumber=errors.mobilenumber)===null||_errors$mobilenumber===void 0?void 0:_errors$mobilenumber.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"combine-input\",children:/*#__PURE__*/_jsx(\"div\",{className:\"Batch-Dropdown\",children:/*#__PURE__*/_jsxs(\"select\",{id:\"branch-drop\",disabled:flag,onChange:handleBranchDropdown,children:[/*#__PURE__*/_jsx(\"option\",{selected:\"selected\",hidden:true,children:\"Select Branch\"}),branch.map(function(b){return/*#__PURE__*/_jsx(\"option\",{name:b.id,value:b.batch,children:b.batch},b.id);})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"University Roll Number\",children:\"University Roll Number\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-detail\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form\",size:\"40\",type:\"text\",name:\"roll\"},register(\"roll\",{required:\"**Qualification is required\"})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$qualification=errors.qualification)===null||_errors$qualification===void 0?void 0:_errors$qualification.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Father Name\",children:\"Father Name\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-detail\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form\",size:\"40\",type:\"text\",name:\"father\"},register(\"father\",{required:\"**Qualification is required\"})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$father=errors.father)===null||_errors$father===void 0?void 0:_errors$father.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Mother Name\",children:\"Mother Name\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-detail\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form\",size:\"40\",type:\"text\",name:\"mother\"},register(\"mother\",{required:\"**Qualification is required\"})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$mother=errors.mother)===null||_errors$mother===void 0?void 0:_errors$mother.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Address\",children:\"Address\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-detail\",children:/*#__PURE__*/_jsx(\"textarea\",_objectSpread({className:\"input-field-form\",cols:40,rows:4,type:\"text\",name:\"address\"},register(\"address\",{required:\"**Address field is required\"})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$address=errors.address)===null||_errors$address===void 0?void 0:_errors$address.message})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"registerImage\",children:[/*#__PURE__*/_jsx(\"img\",{src:flag?\"https://ourcollege.herokuapp.com/\".concat(image):preview,alt:\"Avatar Preview\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",accept:\"image/*\",title:\"\",onChange:handleChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Button-update-3\",children:/*#__PURE__*/_jsx(SubmitButton,{className:\"Admin-Details-Update\",Label:\"Update\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"cross-icon-1\",children:/*#__PURE__*/_jsx(\"i\",{id:\"crossed\",className:\"fa fa-times\",onClick:handleClick})})]})}):null;};export default StudentEditDetails;","map":{"version":3,"sources":["E:/project1/project/src/src/Pages/Dashboard/Student/Profile/StudentEditDetails.js"],"names":["React","useState","useEffect","SubmitButton","useForm","Spinner","profile","AuthService","StudentEditDetails","props","avatar","setAvatar","user","localStorage","getItem","image","setImage","id","name","setName","email","setEmail","batch","branch","setBranch","mobile","setMobile","degree","setDegree","loading","setLoading","flag","setFlag","preview","setPreview","mode","register","handleSubmit","errors","formState","reset","handleBranchDropdown","e","target","value","onSubmit","data","preventDefault","myForm","FormData","set","fullname","mobilenumber","qualification","updateAdminDetails","then","res","console","log","catch","handleClick","setTrigger","handleChange","files","URL","createObjectURL","trigger","required","message","pattern","map","b","father","mother","address"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react'\r\nimport SubmitButton from '../../../../Components/UI/Button/Button'\r\nimport { useForm } from 'react-hook-form'\r\nimport Spinner from '../../../../Components/UI/Spinner/Spinner';\r\nimport profile from '../../../../Assets/Images/Profile.png'\r\nimport AuthService from '../../../../ApiServices/AuthService';\r\nimport './Profile.css'\r\nconst StudentEditDetails = (props) => {\r\n    const [avatar,setAvatar] = useState(profile)\r\n    const user = localStorage.getItem(\"userd\");\r\n    const [image,setImage] = useState(profile);\r\n    const id = localStorage.getItem(\"userid\");\r\n    const [name,setName] = useState(\"\");\r\n    const [email,setEmail] = useState(\"\");\r\n    const [branch,setBranch] = useState( [{ id: \"1\", batch: \"CSE\" }, { id: \"2\", batch: \"IT\" }, { id: \"3\", batch: \"ECE\" }, { id: \"4\", batch: \"EN\" }]);\r\n    const [mobile,setMobile] = useState(\"\");\r\n    const [degree,setDegree] = useState(\"\");\r\n    const [loading,setLoading] = useState(true);\r\n    const [flag,setFlag] = useState(false);\r\n    const [preview,setPreview] = useState(profile);\r\n    const { register, handleSubmit, formState: { errors }, reset } = useForm({\r\n        mode: \"onTouched\",\r\n        // defaultValues: {\r\n        //     fullname: name,\r\n        //     email: email,\r\n        //     mobilenumber: mobile,\r\n        //     qualification: degree,\r\n        // },\r\n    });\r\n     \r\n    const handleBranchDropdown = (e) => {\r\n        setBranch(e.target.value);\r\n    }\r\n    const onSubmit = (data, e) => {\r\n        e.preventDefault();\r\n        const myForm = new FormData();\r\n        myForm.set(\"fullname\", data.fullname);\r\n        myForm.set(\"email\", data.email);\r\n        myForm.set(\"mobile\", data.mobilenumber);\r\n        myForm.set(\"degree\", data.qualification);\r\n        myForm.set(\"image\", avatar);\r\n        AuthService.updateAdminDetails(myForm,user,id)\r\n        .then((res) => {\r\n            console.log(res);\r\n            setFlag(false)\r\n        }).catch((e => {\r\n            console.log(e);\r\n        }))\r\n        e.target.reset();\r\n    }\r\n    const handleClick = (e) => {\r\n        e.preventDefault();\r\n        props.setTrigger(false);\r\n    }\r\n    const handleChange = (e) => {\r\n        setFlag(true);\r\n        console.log(e.target.files[0]);\r\n         if ( e.target.files && e.target.files[0]) {\r\n            setAvatar(e.target.files[0]);\r\n            setPreview(URL.createObjectURL(e.target.files[0]))\r\n            setImage(URL.createObjectURL(e.target.files[0]));\r\n            console.log(e.target.files[0]);\r\n        }\r\n    }\r\n    \r\n    return (props.trigger) ?  (\r\n        <div className='Modal-box1'>\r\n            <div className='Student-Form'>\r\n                <div className='Student-Form-Heading'>\r\n                    <h2>Fill Personal Details</h2>\r\n                </div>\r\n                <div>\r\n                    <form className='Admin-Input' encType=\"multipart/form-data\" onSubmit={handleSubmit(onSubmit)}>\r\n                        <div className='combine-input'>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Full-Name\">\r\n                                    Full Name\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail'>\r\n                                <input className='input-field-form' size={\"40\"} type=\"text\" name=\"fullname\" {...register(\"fullname\", { required: \"**Name is required\", })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.fullname?.message}</p>\r\n                        </div>\r\n                        <div className='combine-input'>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Email\">\r\n                                    Email\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail1'>\r\n                                <i id=\"emailicon1\" className=\"fa fa-envelope icon\"></i>\r\n                                <input className='input-field-form1' size={\"38\"} type=\"email\" placeholder='example@akgec.ac.in' name=\"email\" {...register(\"email\", { required: \"**Email is required\", pattern: { value: /^[a-zA-Z0-9_\\-]{4,}[@][a][k][g][e][c][\\.][a][c][\\.][i][n]$/i, message: \"**This is not a valid email\" } })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.email?.message}</p>\r\n                        </div>\r\n                        <div className='combine-input'>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Mobile\">\r\n                                    Mobile Number\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail'>\r\n                                <input className='input-field-form' size={\"40\"} type=\"text\" name=\"mobilenumber\" {...register(\"mobilenumber\", { required: \"**Mobile Number is required\", pattern: { value: /^[6789][0-9]{9}$/i, message: \"**This is not a valid mobile number\" } })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.mobilenumber?.message}</p>\r\n                        </div>\r\n                        <div className='combine-input'>\r\n                        <div className='Batch-Dropdown'>\r\n                    <select id=\"branch-drop\" disabled={flag} onChange={handleBranchDropdown}>\r\n                        <option selected=\"selected\" hidden>Select Branch</option>\r\n                        {\r\n                            branch.map((b) => (\r\n                                <option key={b.id} name={b.id} value={b.batch}>{b.batch}</option>\r\n                            ))\r\n                        }\r\n                    </select>\r\n                    </div>\r\n                </div>\r\n                        <div className='combine-input'>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"University Roll Number\">\r\n                                    University Roll Number\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail'>\r\n                                <input className='input-field-form' size={\"40\"} type=\"text\" name=\"roll\" {...register(\"roll\", { required: \"**Qualification is required\", })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.qualification?.message}</p>\r\n                        </div>\r\n                        <div className='combine-input'>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Father Name\">\r\n                                    Father Name\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail'>\r\n                                <input className='input-field-form' size={\"40\"} type=\"text\" name=\"father\" {...register(\"father\", { required: \"**Qualification is required\", })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.father?.message}</p>\r\n                        </div>\r\n                        <div className='combine-input'>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Mother Name\">\r\n                                    Mother Name\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail'>\r\n                                <input className='input-field-form' size={\"40\"} type=\"text\" name=\"mother\" {...register(\"mother\", { required: \"**Qualification is required\", })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.mother?.message}</p>\r\n                        </div>\r\n                        <div className='combine-input'>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Address\">\r\n                                    Address\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail'>\r\n                            <textarea className='input-field-form' cols={40} rows={4} type=\"text\" name=\"address\" {...register(\"address\", { required: \"**Address field is required\" })}></textarea>\r\n                            </div>\r\n                            <p className='alerts'>{errors.address?.message}</p>\r\n                        </div>\r\n                        <div id=\"registerImage\">\r\n                            <img src={flag ?  `https://ourcollege.herokuapp.com/${image}` : preview} alt=\"Avatar Preview\" />\r\n                            <input\r\n                                type=\"file\"\r\n                                name=\"avatar\"\r\n                                accept=\"image/*\"\r\n                                title=''\r\n                                onChange={handleChange}\r\n                            />\r\n                        </div>\r\n                        <div className='Button-update-3'>\r\n                            <SubmitButton className=\"Admin-Details-Update\" Label=\"Update\" ></SubmitButton>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div className='cross-icon-1'>\r\n                    <i id=\"crossed\" className=\"fa fa-times\" onClick={handleClick} ></i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    ) : null ;\r\n}\r\n\r\nexport default StudentEditDetails"]},"metadata":{},"sourceType":"module"}