{"ast":null,"code":"import _objectSpread from\"E:/College-ERP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/College-ERP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import SubmitButton from'../../../../Components/UI/Button/Button';import{set,useForm}from'react-hook-form';import'./Batches.css';import AuthService from'../../../../ApiServices/AuthService';import{toast}from'react-toastify';import Toaster from'../../../../Components/UI/Toaster/Toaster';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddStudent=function AddStudent(props){var _errors$batch,_errors$batch2,_errors$batch3,_errors$batch4;var years=[{id:\"1\",yr:\"First\"},{id:\"2\",yr:\"Second\"},{id:\"3\",yr:\"Third\"},{id:\"4\",yr:\"Fourth\"}];var semester=[{id:\"1\",sem:\"1\"},{id:\"2\",sem:\"2\"},{id:\"3\",sem:\"3\"},{id:\"4\",sem:\"4\"},{id:\"5\",sem:\"5\"},{id:\"6\",sem:\"6\"},{id:\"7\",sem:\"7\"},{id:\"8\",sem:\"8\"}];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),year=_useState2[0],setYear=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),sem=_useState4[0],setSem=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),csvfile=_useState6[0],setCsvFile=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),csvArray=_useState8[0],setCsvArray=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),flag1=_useState10[0],setFlag1=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),flag2=_useState12[0],setFlag2=_useState12[1];var _useForm=useForm({mode:\"onTouched\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,reset=_useForm.reset;var processCSV=function processCSV(str){var delim=arguments.length>1&&arguments[1]!==undefined?arguments[1]:',';var headers=[\"fullname\",\"email\"];var rows=str.slice(str.indexOf('\\n')+1).split('\\r\\n');var Array=rows.map(function(row){var values=row.split(delim);var eachobj=headers.reduce(function(obj,header,i){obj[header]=values[i];return obj;},{});return eachobj;});console.log(Array);setCsvArray(Array);};var onSubmit=function onSubmit(data,e){e.preventDefault();if(year===null){setFlag1(true);}if(sem===null){setFlag2(true);}if(csvfile){var file=csvfile;var reader=new FileReader();reader.onload=function(e){var text=e.target.result;console.log(text);processCSV(text);};reader.readAsText(file);if(csvArray.length>0&&year&&sem){var obj={array:csvArray,password:data.password,year:year,sem:sem,batch:data.batch};AuthService.AddStudent(obj).then(function(res){console.log(res);if(res){toast.success(\"Students Added Successfully\");}}).catch(function(e){console.log(e);});}}reset();};var handleClick=function handleClick(e){e.preventDefault();props.setTrigger(false);};var handleSemesterDropdown=function handleSemesterDropdown(e){setSem(e.target.value);};var handleYearDropdown=function handleYearDropdown(e){setYear(e.target.value);};return props.trigger?/*#__PURE__*/_jsxs(\"div\",{className:\"Modal-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"AddStudent-Form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"EditDetails-Heading\",style:{marginBottom:\"5%\"},children:/*#__PURE__*/_jsx(\"h2\",{children:\"Add Student\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"EditDetails-Form-Input\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",style:{marginBottom:\"3%\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Batch Name\",children:\"Batch Name\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-detail\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form\",size:\"34\",type:\"text\",name:\"batch\"},register(\"batch\",{required:\"**Batch Name is required\"})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$batch=errors.batch)===null||_errors$batch===void 0?void 0:_errors$batch.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",style:{marginBottom:\"3%\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Password\",children:\"Password\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-detail\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"input-field-form\",size:\"34\",type:\"text\",name:\"password\"},register(\"password\",{required:\"**Password is required\"})))}),/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$batch2=errors.batch)===null||_errors$batch2===void 0?void 0:_errors$batch2.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Year-Dropdown\",children:/*#__PURE__*/_jsxs(\"select\",{id:\"Year-drop\",onChange:handleYearDropdown,children:[/*#__PURE__*/_jsx(\"option\",{selected:\"selected\",hidden:true,children:\"Select Year\"}),years.map(function(y){return/*#__PURE__*/_jsx(\"option\",{name:y.id,value:y.id,children:y.yr},y.id);})]})}),flag1?/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$batch3=errors.batch)===null||_errors$batch3===void 0?void 0:_errors$batch3.message}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Year-Dropdown\",children:/*#__PURE__*/_jsxs(\"select\",{id:\"sem-drop\",onChange:handleSemesterDropdown,children:[/*#__PURE__*/_jsx(\"option\",{selected:\"selected\",hidden:true,children:\"Select Semester\"}),semester.map(function(s){return/*#__PURE__*/_jsx(\"option\",{name:s.id,value:s.id,children:s.sem},s.id);})]})}),flag2?/*#__PURE__*/_jsx(\"p\",{className:\"alerts\",children:(_errors$batch4=errors.batch)===null||_errors$batch4===void 0?void 0:_errors$batch4.message}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"combine-input\",style:{marginBottom:\"3%\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"Label-form\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Upload File\",children:\"Upload File\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Input-Details\",style:{marginBottom:\"4%\"},children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".csv\",name:\"csv\",onChange:function onChange(e){setCsvFile(e.target.files[0]);}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"EditDetail-btn\",children:/*#__PURE__*/_jsx(SubmitButton,{className:\"EditDetail-button\",Label:\"Add Student\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"cross-icon\",children:/*#__PURE__*/_jsx(\"i\",{id:\"crossed\",className:\"fa fa-times\",onClick:handleClick})})]}),/*#__PURE__*/_jsx(Toaster,{})]}):null;};export default AddStudent;","map":{"version":3,"sources":["E:/College-ERP/src/Pages/Dashboard/Admin/Batches/AddStudent.js"],"names":["React","useState","useEffect","SubmitButton","set","useForm","AuthService","toast","Toaster","AddStudent","props","years","id","yr","semester","sem","year","setYear","setSem","csvfile","setCsvFile","csvArray","setCsvArray","flag1","setFlag1","flag2","setFlag2","mode","register","handleSubmit","errors","formState","reset","processCSV","str","delim","headers","rows","slice","indexOf","split","Array","map","row","values","eachobj","reduce","obj","header","i","console","log","onSubmit","data","e","preventDefault","file","reader","FileReader","onload","text","target","result","readAsText","length","array","password","batch","then","res","success","catch","handleClick","setTrigger","handleSemesterDropdown","value","handleYearDropdown","trigger","marginBottom","required","message","y","s","files"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport SubmitButton from '../../../../Components/UI/Button/Button'\r\nimport { set, useForm } from 'react-hook-form'\r\nimport './Batches.css'\r\nimport AuthService from '../../../../ApiServices/AuthService'\r\nimport { toast } from 'react-toastify'\r\nimport Toaster from '../../../../Components/UI/Toaster/Toaster'\r\nconst AddStudent = (props) => {\r\n    const years = [{ id: \"1\", yr: \"First\" }, { id: \"2\", yr: \"Second\" }, { id: \"3\", yr: \"Third\" }, { id: \"4\", yr: \"Fourth\" }];\r\n    const semester = [{ id: \"1\", sem: \"1\" }, { id: \"2\", sem: \"2\" }, { id: \"3\", sem: \"3\" }, { id: \"4\", sem: \"4\" }, { id: \"5\", sem: \"5\" }, { id: \"6\", sem: \"6\" }, { id: \"7\", sem: \"7\" }, { id: \"8\", sem: \"8\" }];\r\n    const [year , setYear] = useState(null);\r\n    const [sem , setSem] = useState(null);\r\n    const [csvfile,setCsvFile] = useState(null);\r\n    const [csvArray,setCsvArray] = useState([]);\r\n    const [ flag1 , setFlag1] = useState(false)\r\n    const [ flag2 , setFlag2] = useState(false)\r\n    const { register, handleSubmit, formState: { errors }, reset } = useForm({\r\n        mode: \"onTouched\",\r\n    });\r\n    const processCSV = (str , delim=',') =>{\r\n        const headers = [\"fullname\",\"email\"]\r\n        const rows = str.slice(str.indexOf('\\n')+1).split('\\r\\n');\r\n        const Array = rows.map(row => {\r\n            const values = row.split(delim);\r\n            const eachobj = headers.reduce((obj,header,i)=> {\r\n                    obj[header] = values[i];\r\n                    return obj;\r\n            } , {}) \r\n            return eachobj;\r\n        })\r\n        console.log(Array);\r\n        setCsvArray(Array)\r\n    }\r\n    const onSubmit = (data, e) => {\r\n        e.preventDefault();\r\n        if(year===null){\r\n            setFlag1(true);\r\n        }\r\n        if(sem === null){\r\n            setFlag2(true);\r\n        }\r\n        if(csvfile){\r\n            const file = csvfile;\r\n            const reader = new FileReader();\r\n            reader.onload = function(e){\r\n                const text = e.target.result;\r\n                console.log(text);\r\n                processCSV(text);\r\n            }\r\n            reader.readAsText(file);\r\n            if(csvArray.length > 0 && year && sem){\r\n              const  obj = {\r\n                    array : csvArray,\r\n                    password : data.password,\r\n                    year : year,\r\n                    sem : sem,\r\n                    batch:data.batch,\r\n                }\r\n             AuthService.AddStudent(obj)\r\n             .then((res)=>{\r\n                 console.log(res);\r\n                 if(res){\r\n                     toast.success(\"Students Added Successfully\");\r\n                    \r\n                 }\r\n             }).catch((e)=>{\r\n                 console.log(e);\r\n             })\r\n            \r\n            }\r\n\r\n        }\r\n        reset();\r\n    }\r\n    const handleClick = (e) => {\r\n        e.preventDefault();\r\n        props.setTrigger(false);\r\n    }\r\n    const handleSemesterDropdown = (e) => {\r\n        setSem(e.target.value);\r\n    }\r\n    const handleYearDropdown = (e) => {\r\n        setYear(e.target.value);\r\n    }\r\n\r\n    return (props.trigger) ? (\r\n        <div className='Modal-box'>\r\n            <div className='AddStudent-Form'>\r\n                <div className='EditDetails-Heading' style={{ marginBottom: \"5%\" }}>\r\n                    <h2>Add Student</h2>\r\n                </div>\r\n                <div>\r\n                    <form className='EditDetails-Form-Input' onSubmit={handleSubmit(onSubmit)}>\r\n                        <div className='combine-input' style={{ marginBottom: \"3%\" }}>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Batch Name\">\r\n                                    Batch Name\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail'>\r\n                                <input className='input-field-form' size={\"34\"} type=\"text\" name=\"batch\" {...register(\"batch\", { required: \"**Batch Name is required\", })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.batch?.message}</p>\r\n                        </div>\r\n                        <div className='combine-input' style={{ marginBottom: \"3%\" }}>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Password\">\r\n                                    Password\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-detail'>\r\n                                <input className='input-field-form' size={\"34\"} type=\"text\" name=\"password\" {...register(\"password\", { required: \"**Password is required\", })}></input>\r\n                            </div>\r\n                            <p className='alerts'>{errors.batch?.message}</p>\r\n                        </div>\r\n                        <div className='combine-input'>\r\n                            <div className='Year-Dropdown'>\r\n                                <select id=\"Year-drop\" onChange={handleYearDropdown}>\r\n                                    <option selected=\"selected\" hidden>Select Year</option>\r\n                                    {\r\n                                        years.map((y) => (\r\n                                            <option key={y.id} name={y.id} value={y.id}>{y.yr}</option>\r\n                                        ))\r\n                                    }\r\n                                </select>\r\n                            </div>\r\n                            {flag1 ?  <p className='alerts'>{errors.batch?.message}</p> : null}\r\n                        </div>\r\n                        <div className='combine-input'>\r\n                            <div className='Year-Dropdown'>\r\n                                <select id=\"sem-drop\" onChange={handleSemesterDropdown}>\r\n                                    <option selected=\"selected\" hidden>Select Semester</option>\r\n                                    {\r\n                                        semester.map((s) => (\r\n                                            <option key={s.id} name={s.id} value={s.id}>{s.sem}</option>\r\n                                        ))\r\n                                    }\r\n                                </select>\r\n                            </div>\r\n                            {flag2 ?  <p className='alerts'>{errors.batch?.message}</p> : null}\r\n                        </div>\r\n                        <div className='combine-input' style={{ marginBottom: \"3%\" }}>\r\n                            <div className='Label-form'>\r\n                                <label htmlFor=\"Upload File\">\r\n                                    Upload File\r\n                                </label>\r\n                            </div>\r\n                            <div className='Input-Details' style={{marginBottom: \"4%\"}}>\r\n                                <input \r\n                                 type=\"file\" \r\n                                 accept='.csv'\r\n                                 name=\"csv\" \r\n                                 onChange={(e) => { setCsvFile(e.target.files[0]) }} ></input>\r\n                            </div>\r\n                        </div>\r\n                        <div className='EditDetail-btn'>\r\n                            <SubmitButton className=\"EditDetail-button\" Label=\"Add Student\" ></SubmitButton>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div className='cross-icon'>\r\n                    <i id=\"crossed\" className=\"fa fa-times\" onClick={handleClick} ></i>\r\n                </div>\r\n            </div>\r\n            <Toaster />\r\n        </div>\r\n    ) : null;\r\n}\r\n\r\nexport default AddStudent\r\n"]},"metadata":{},"sourceType":"module"}