{"ast":null,"code":"'use strict';\n\nvar $ = require('../internals/export');\n\nvar IS_PURE = require('../internals/is-pure');\n\nvar global = require('../internals/global');\n\nvar getBuiltIn = require('../internals/get-built-in');\n\nvar call = require('../internals/function-call');\n\nvar NativePromise = require('../internals/native-promise-constructor');\n\nvar redefine = require('../internals/redefine');\n\nvar redefineAll = require('../internals/redefine-all');\n\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\nvar setToStringTag = require('../internals/set-to-string-tag');\n\nvar setSpecies = require('../internals/set-species');\n\nvar aCallable = require('../internals/a-callable');\n\nvar isCallable = require('../internals/is-callable');\n\nvar isObject = require('../internals/is-object');\n\nvar anInstance = require('../internals/an-instance');\n\nvar inspectSource = require('../internals/inspect-source');\n\nvar iterate = require('../internals/iterate');\n\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar speciesConstructor = require('../internals/species-constructor');\n\nvar task = require('../internals/task').set;\n\nvar microtask = require('../internals/microtask');\n\nvar promiseResolve = require('../internals/promise-resolve');\n\nvar hostReportErrors = require('../internals/host-report-errors');\n\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\n\nvar perform = require('../internals/perform');\n\nvar InternalStateModule = require('../internals/internal-state');\n\nvar isForced = require('../internals/is-forced');\n\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar IS_BROWSER = require('../internals/engine-is-browser');\n\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\nvar PROMISE = 'Promise';\nvar getInternalState = InternalStateModule.getterFor(PROMISE);\nvar setInternalState = InternalStateModule.set;\nvar getInternalPromiseState = InternalStateModule.getterFor(PROMISE);\nvar NativePromisePrototype = NativePromise && NativePromise.prototype;\nvar PromiseConstructor = NativePromise;\nvar PromisePrototype = NativePromisePrototype;\nvar TypeError = global.TypeError;\nvar document = global.document;\nvar process = global.process;\nvar newPromiseCapability = newPromiseCapabilityModule.f;\nvar newGenericPromiseCapability = newPromiseCapability;\nvar DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);\nvar NATIVE_REJECTION_EVENT = isCallable(global.PromiseRejectionEvent);\nvar UNHANDLED_REJECTION = 'unhandledrejection';\nvar REJECTION_HANDLED = 'rejectionhandled';\nvar PENDING = 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\nvar HANDLED = 1;\nvar UNHANDLED = 2;\nvar SUBCLASSING = false;\nvar Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;\nvar FORCED = isForced(PROMISE, function () {\n  var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(PromiseConstructor);\n  var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(PromiseConstructor); // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n  // We can't detect it synchronously, so just check versions\n\n  if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66) return true; // We need Promise#finally in the pure version for preventing prototype pollution\n\n  if (IS_PURE && !PromisePrototype['finally']) return true; // We can't use @@species feature detection in V8 since it causes\n  // deoptimization and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n\n  if (V8_VERSION >= 51 && /native code/.test(PROMISE_CONSTRUCTOR_SOURCE)) return false; // Detect correctness of subclassing with @@species support\n\n  var promise = new PromiseConstructor(function (resolve) {\n    resolve(1);\n  });\n\n  var FakePromise = function FakePromise(exec) {\n    exec(function () {\n      /* empty */\n    }, function () {\n      /* empty */\n    });\n  };\n\n  var constructor = promise.constructor = {};\n  constructor[SPECIES] = FakePromise;\n  SUBCLASSING = promise.then(function () {\n    /* empty */\n  }) instanceof FakePromise;\n  if (!SUBCLASSING) return true; // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n\n  return !GLOBAL_CORE_JS_PROMISE && IS_BROWSER && !NATIVE_REJECTION_EVENT;\n});\nvar INCORRECT_ITERATION = FORCED || !checkCorrectnessOfIteration(function (iterable) {\n  PromiseConstructor.all(iterable)['catch'](function () {\n    /* empty */\n  });\n}); // helpers\n\nvar isThenable = function isThenable(it) {\n  var then;\n  return isObject(it) && isCallable(then = it.then) ? then : false;\n};\n\nvar notify = function notify(state, isReject) {\n  if (state.notified) return;\n  state.notified = true;\n  var chain = state.reactions;\n  microtask(function () {\n    var value = state.value;\n    var ok = state.state == FULFILLED;\n    var index = 0; // variable length - can't use forEach\n\n    while (chain.length > index) {\n      var reaction = chain[index++];\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n\n      try {\n        if (handler) {\n          if (!ok) {\n            if (state.rejection === UNHANDLED) onHandleUnhandled(state);\n            state.rejection = HANDLED;\n          }\n\n          if (handler === true) result = value;else {\n            if (domain) domain.enter();\n            result = handler(value); // can throw\n\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            call(then, result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (error) {\n        if (domain && !exited) domain.exit();\n        reject(error);\n      }\n    }\n\n    state.reactions = [];\n    state.notified = false;\n    if (isReject && !state.rejection) onUnhandled(state);\n  });\n};\n\nvar dispatchEvent = function dispatchEvent(name, promise, reason) {\n  var event, handler;\n\n  if (DISPATCH_EVENT) {\n    event = document.createEvent('Event');\n    event.promise = promise;\n    event.reason = reason;\n    event.initEvent(name, false, true);\n    global.dispatchEvent(event);\n  } else event = {\n    promise: promise,\n    reason: reason\n  };\n\n  if (!NATIVE_REJECTION_EVENT && (handler = global['on' + name])) handler(event);else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);\n};\n\nvar onUnhandled = function onUnhandled(state) {\n  call(task, global, function () {\n    var promise = state.facade;\n    var value = state.value;\n    var IS_UNHANDLED = isUnhandled(state);\n    var result;\n\n    if (IS_UNHANDLED) {\n      result = perform(function () {\n        if (IS_NODE) {\n          process.emit('unhandledRejection', value, promise);\n        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);\n      }); // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n\n      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;\n      if (result.error) throw result.value;\n    }\n  });\n};\n\nvar isUnhandled = function isUnhandled(state) {\n  return state.rejection !== HANDLED && !state.parent;\n};\n\nvar onHandleUnhandled = function onHandleUnhandled(state) {\n  call(task, global, function () {\n    var promise = state.facade;\n\n    if (IS_NODE) {\n      process.emit('rejectionHandled', promise);\n    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);\n  });\n};\n\nvar bind = function bind(fn, state, unwrap) {\n  return function (value) {\n    fn(state, value, unwrap);\n  };\n};\n\nvar internalReject = function internalReject(state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  state.value = value;\n  state.state = REJECTED;\n  notify(state, true);\n};\n\nvar internalResolve = function internalResolve(state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n\n  try {\n    if (state.facade === value) throw TypeError(\"Promise can't be resolved itself\");\n    var then = isThenable(value);\n\n    if (then) {\n      microtask(function () {\n        var wrapper = {\n          done: false\n        };\n\n        try {\n          call(then, value, bind(internalResolve, wrapper, state), bind(internalReject, wrapper, state));\n        } catch (error) {\n          internalReject(wrapper, error, state);\n        }\n      });\n    } else {\n      state.value = value;\n      state.state = FULFILLED;\n      notify(state, false);\n    }\n  } catch (error) {\n    internalReject({\n      done: false\n    }, error, state);\n  }\n}; // constructor polyfill\n\n\nif (FORCED) {\n  // 25.4.3.1 Promise(executor)\n  PromiseConstructor = function Promise(executor) {\n    anInstance(this, PromisePrototype);\n    aCallable(executor);\n    call(Internal, this);\n    var state = getInternalState(this);\n\n    try {\n      executor(bind(internalResolve, state), bind(internalReject, state));\n    } catch (error) {\n      internalReject(state, error);\n    }\n  };\n\n  PromisePrototype = PromiseConstructor.prototype; // eslint-disable-next-line no-unused-vars -- required for `.length`\n\n  Internal = function Promise(executor) {\n    setInternalState(this, {\n      type: PROMISE,\n      done: false,\n      notified: false,\n      parent: false,\n      reactions: [],\n      rejection: false,\n      state: PENDING,\n      value: undefined\n    });\n  };\n\n  Internal.prototype = redefineAll(PromisePrototype, {\n    // `Promise.prototype.then` method\n    // https://tc39.es/ecma262/#sec-promise.prototype.then\n    then: function then(onFulfilled, onRejected) {\n      var state = getInternalPromiseState(this);\n      var reactions = state.reactions;\n      var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));\n      reaction.ok = isCallable(onFulfilled) ? onFulfilled : true;\n      reaction.fail = isCallable(onRejected) && onRejected;\n      reaction.domain = IS_NODE ? process.domain : undefined;\n      state.parent = true;\n      reactions[reactions.length] = reaction;\n      if (state.state != PENDING) notify(state, false);\n      return reaction.promise;\n    },\n    // `Promise.prototype.catch` method\n    // https://tc39.es/ecma262/#sec-promise.prototype.catch\n    'catch': function _catch(onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n\n  OwnPromiseCapability = function OwnPromiseCapability() {\n    var promise = new Internal();\n    var state = getInternalState(promise);\n    this.promise = promise;\n    this.resolve = bind(internalResolve, state);\n    this.reject = bind(internalReject, state);\n  };\n\n  newPromiseCapabilityModule.f = newPromiseCapability = function newPromiseCapability(C) {\n    return C === PromiseConstructor || C === PromiseWrapper ? new OwnPromiseCapability(C) : newGenericPromiseCapability(C);\n  };\n\n  if (!IS_PURE && isCallable(NativePromise) && NativePromisePrototype !== Object.prototype) {\n    nativeThen = NativePromisePrototype.then;\n\n    if (!SUBCLASSING) {\n      // make `Promise#then` return a polyfilled `Promise` for native promise-based APIs\n      redefine(NativePromisePrototype, 'then', function then(onFulfilled, onRejected) {\n        var that = this;\n        return new PromiseConstructor(function (resolve, reject) {\n          call(nativeThen, that, resolve, reject);\n        }).then(onFulfilled, onRejected); // https://github.com/zloirock/core-js/issues/640\n      }, {\n        unsafe: true\n      }); // makes sure that native promise-based APIs `Promise#catch` properly works with patched `Promise#then`\n\n      redefine(NativePromisePrototype, 'catch', PromisePrototype['catch'], {\n        unsafe: true\n      });\n    } // make `.constructor === Promise` work for native promise-based APIs\n\n\n    try {\n      delete NativePromisePrototype.constructor;\n    } catch (error) {\n      /* empty */\n    } // make `instanceof Promise` work for native promise-based APIs\n\n\n    if (setPrototypeOf) {\n      setPrototypeOf(NativePromisePrototype, PromisePrototype);\n    }\n  }\n}\n\n$({\n  global: true,\n  wrap: true,\n  forced: FORCED\n}, {\n  Promise: PromiseConstructor\n});\nsetToStringTag(PromiseConstructor, PROMISE, false, true);\nsetSpecies(PROMISE);\nPromiseWrapper = getBuiltIn(PROMISE); // statics\n\n$({\n  target: PROMISE,\n  stat: true,\n  forced: FORCED\n}, {\n  // `Promise.reject` method\n  // https://tc39.es/ecma262/#sec-promise.reject\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    call(capability.reject, undefined, r);\n    return capability.promise;\n  }\n});\n$({\n  target: PROMISE,\n  stat: true,\n  forced: IS_PURE || FORCED\n}, {\n  // `Promise.resolve` method\n  // https://tc39.es/ecma262/#sec-promise.resolve\n  resolve: function resolve(x) {\n    return promiseResolve(IS_PURE && this === PromiseWrapper ? PromiseConstructor : this, x);\n  }\n});\n$({\n  target: PROMISE,\n  stat: true,\n  forced: INCORRECT_ITERATION\n}, {\n  // `Promise.all` method\n  // https://tc39.es/ecma262/#sec-promise.all\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aCallable(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        remaining++;\n        call($promiseResolve, C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  },\n  // `Promise.race` method\n  // https://tc39.es/ecma262/#sec-promise.race\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aCallable(C.resolve);\n      iterate(iterable, function (promise) {\n        call($promiseResolve, C, promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});","map":{"version":3,"sources":["E:/project1/project/src/node_modules/core-js/modules/es.promise.js"],"names":["$","require","IS_PURE","global","getBuiltIn","call","NativePromise","redefine","redefineAll","setPrototypeOf","setToStringTag","setSpecies","aCallable","isCallable","isObject","anInstance","inspectSource","iterate","checkCorrectnessOfIteration","speciesConstructor","task","set","microtask","promiseResolve","hostReportErrors","newPromiseCapabilityModule","perform","InternalStateModule","isForced","wellKnownSymbol","IS_BROWSER","IS_NODE","V8_VERSION","SPECIES","PROMISE","getInternalState","getterFor","setInternalState","getInternalPromiseState","NativePromisePrototype","prototype","PromiseConstructor","PromisePrototype","TypeError","document","process","newPromiseCapability","f","newGenericPromiseCapability","DISPATCH_EVENT","createEvent","dispatchEvent","NATIVE_REJECTION_EVENT","PromiseRejectionEvent","UNHANDLED_REJECTION","REJECTION_HANDLED","PENDING","FULFILLED","REJECTED","HANDLED","UNHANDLED","SUBCLASSING","Internal","OwnPromiseCapability","PromiseWrapper","nativeThen","FORCED","PROMISE_CONSTRUCTOR_SOURCE","GLOBAL_CORE_JS_PROMISE","String","test","promise","resolve","FakePromise","exec","constructor","then","INCORRECT_ITERATION","iterable","all","isThenable","it","notify","state","isReject","notified","chain","reactions","value","ok","index","length","reaction","handler","fail","reject","domain","result","exited","rejection","onHandleUnhandled","enter","exit","error","onUnhandled","name","reason","event","initEvent","facade","IS_UNHANDLED","isUnhandled","emit","parent","bind","fn","unwrap","internalReject","done","internalResolve","wrapper","Promise","executor","type","undefined","onFulfilled","onRejected","C","Object","that","unsafe","wrap","forced","target","stat","r","capability","x","$promiseResolve","values","counter","remaining","alreadyCalled","race"],"mappings":"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","sourcesContent":["'use strict';\r\nvar $ = require('../internals/export');\r\nvar IS_PURE = require('../internals/is-pure');\r\nvar global = require('../internals/global');\r\nvar getBuiltIn = require('../internals/get-built-in');\r\nvar call = require('../internals/function-call');\r\nvar NativePromise = require('../internals/native-promise-constructor');\r\nvar redefine = require('../internals/redefine');\r\nvar redefineAll = require('../internals/redefine-all');\r\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\r\nvar setToStringTag = require('../internals/set-to-string-tag');\r\nvar setSpecies = require('../internals/set-species');\r\nvar aCallable = require('../internals/a-callable');\r\nvar isCallable = require('../internals/is-callable');\r\nvar isObject = require('../internals/is-object');\r\nvar anInstance = require('../internals/an-instance');\r\nvar inspectSource = require('../internals/inspect-source');\r\nvar iterate = require('../internals/iterate');\r\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\r\nvar speciesConstructor = require('../internals/species-constructor');\r\nvar task = require('../internals/task').set;\r\nvar microtask = require('../internals/microtask');\r\nvar promiseResolve = require('../internals/promise-resolve');\r\nvar hostReportErrors = require('../internals/host-report-errors');\r\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\r\nvar perform = require('../internals/perform');\r\nvar InternalStateModule = require('../internals/internal-state');\r\nvar isForced = require('../internals/is-forced');\r\nvar wellKnownSymbol = require('../internals/well-known-symbol');\r\nvar IS_BROWSER = require('../internals/engine-is-browser');\r\nvar IS_NODE = require('../internals/engine-is-node');\r\nvar V8_VERSION = require('../internals/engine-v8-version');\r\n\r\nvar SPECIES = wellKnownSymbol('species');\r\nvar PROMISE = 'Promise';\r\n\r\nvar getInternalState = InternalStateModule.getterFor(PROMISE);\r\nvar setInternalState = InternalStateModule.set;\r\nvar getInternalPromiseState = InternalStateModule.getterFor(PROMISE);\r\nvar NativePromisePrototype = NativePromise && NativePromise.prototype;\r\nvar PromiseConstructor = NativePromise;\r\nvar PromisePrototype = NativePromisePrototype;\r\nvar TypeError = global.TypeError;\r\nvar document = global.document;\r\nvar process = global.process;\r\nvar newPromiseCapability = newPromiseCapabilityModule.f;\r\nvar newGenericPromiseCapability = newPromiseCapability;\r\n\r\nvar DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);\r\nvar NATIVE_REJECTION_EVENT = isCallable(global.PromiseRejectionEvent);\r\nvar UNHANDLED_REJECTION = 'unhandledrejection';\r\nvar REJECTION_HANDLED = 'rejectionhandled';\r\nvar PENDING = 0;\r\nvar FULFILLED = 1;\r\nvar REJECTED = 2;\r\nvar HANDLED = 1;\r\nvar UNHANDLED = 2;\r\nvar SUBCLASSING = false;\r\n\r\nvar Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;\r\n\r\nvar FORCED = isForced(PROMISE, function () {\r\n  var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(PromiseConstructor);\r\n  var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(PromiseConstructor);\r\n  // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\r\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\r\n  // We can't detect it synchronously, so just check versions\r\n  if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66) return true;\r\n  // We need Promise#finally in the pure version for preventing prototype pollution\r\n  if (IS_PURE && !PromisePrototype['finally']) return true;\r\n  // We can't use @@species feature detection in V8 since it causes\r\n  // deoptimization and performance degradation\r\n  // https://github.com/zloirock/core-js/issues/679\r\n  if (V8_VERSION >= 51 && /native code/.test(PROMISE_CONSTRUCTOR_SOURCE)) return false;\r\n  // Detect correctness of subclassing with @@species support\r\n  var promise = new PromiseConstructor(function (resolve) { resolve(1); });\r\n  var FakePromise = function (exec) {\r\n    exec(function () { /* empty */ }, function () { /* empty */ });\r\n  };\r\n  var constructor = promise.constructor = {};\r\n  constructor[SPECIES] = FakePromise;\r\n  SUBCLASSING = promise.then(function () { /* empty */ }) instanceof FakePromise;\r\n  if (!SUBCLASSING) return true;\r\n  // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test\r\n  return !GLOBAL_CORE_JS_PROMISE && IS_BROWSER && !NATIVE_REJECTION_EVENT;\r\n});\r\n\r\nvar INCORRECT_ITERATION = FORCED || !checkCorrectnessOfIteration(function (iterable) {\r\n  PromiseConstructor.all(iterable)['catch'](function () { /* empty */ });\r\n});\r\n\r\n// helpers\r\nvar isThenable = function (it) {\r\n  var then;\r\n  return isObject(it) && isCallable(then = it.then) ? then : false;\r\n};\r\n\r\nvar notify = function (state, isReject) {\r\n  if (state.notified) return;\r\n  state.notified = true;\r\n  var chain = state.reactions;\r\n  microtask(function () {\r\n    var value = state.value;\r\n    var ok = state.state == FULFILLED;\r\n    var index = 0;\r\n    // variable length - can't use forEach\r\n    while (chain.length > index) {\r\n      var reaction = chain[index++];\r\n      var handler = ok ? reaction.ok : reaction.fail;\r\n      var resolve = reaction.resolve;\r\n      var reject = reaction.reject;\r\n      var domain = reaction.domain;\r\n      var result, then, exited;\r\n      try {\r\n        if (handler) {\r\n          if (!ok) {\r\n            if (state.rejection === UNHANDLED) onHandleUnhandled(state);\r\n            state.rejection = HANDLED;\r\n          }\r\n          if (handler === true) result = value;\r\n          else {\r\n            if (domain) domain.enter();\r\n            result = handler(value); // can throw\r\n            if (domain) {\r\n              domain.exit();\r\n              exited = true;\r\n            }\r\n          }\r\n          if (result === reaction.promise) {\r\n            reject(TypeError('Promise-chain cycle'));\r\n          } else if (then = isThenable(result)) {\r\n            call(then, result, resolve, reject);\r\n          } else resolve(result);\r\n        } else reject(value);\r\n      } catch (error) {\r\n        if (domain && !exited) domain.exit();\r\n        reject(error);\r\n      }\r\n    }\r\n    state.reactions = [];\r\n    state.notified = false;\r\n    if (isReject && !state.rejection) onUnhandled(state);\r\n  });\r\n};\r\n\r\nvar dispatchEvent = function (name, promise, reason) {\r\n  var event, handler;\r\n  if (DISPATCH_EVENT) {\r\n    event = document.createEvent('Event');\r\n    event.promise = promise;\r\n    event.reason = reason;\r\n    event.initEvent(name, false, true);\r\n    global.dispatchEvent(event);\r\n  } else event = { promise: promise, reason: reason };\r\n  if (!NATIVE_REJECTION_EVENT && (handler = global['on' + name])) handler(event);\r\n  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);\r\n};\r\n\r\nvar onUnhandled = function (state) {\r\n  call(task, global, function () {\r\n    var promise = state.facade;\r\n    var value = state.value;\r\n    var IS_UNHANDLED = isUnhandled(state);\r\n    var result;\r\n    if (IS_UNHANDLED) {\r\n      result = perform(function () {\r\n        if (IS_NODE) {\r\n          process.emit('unhandledRejection', value, promise);\r\n        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);\r\n      });\r\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\r\n      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;\r\n      if (result.error) throw result.value;\r\n    }\r\n  });\r\n};\r\n\r\nvar isUnhandled = function (state) {\r\n  return state.rejection !== HANDLED && !state.parent;\r\n};\r\n\r\nvar onHandleUnhandled = function (state) {\r\n  call(task, global, function () {\r\n    var promise = state.facade;\r\n    if (IS_NODE) {\r\n      process.emit('rejectionHandled', promise);\r\n    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);\r\n  });\r\n};\r\n\r\nvar bind = function (fn, state, unwrap) {\r\n  return function (value) {\r\n    fn(state, value, unwrap);\r\n  };\r\n};\r\n\r\nvar internalReject = function (state, value, unwrap) {\r\n  if (state.done) return;\r\n  state.done = true;\r\n  if (unwrap) state = unwrap;\r\n  state.value = value;\r\n  state.state = REJECTED;\r\n  notify(state, true);\r\n};\r\n\r\nvar internalResolve = function (state, value, unwrap) {\r\n  if (state.done) return;\r\n  state.done = true;\r\n  if (unwrap) state = unwrap;\r\n  try {\r\n    if (state.facade === value) throw TypeError(\"Promise can't be resolved itself\");\r\n    var then = isThenable(value);\r\n    if (then) {\r\n      microtask(function () {\r\n        var wrapper = { done: false };\r\n        try {\r\n          call(then, value,\r\n            bind(internalResolve, wrapper, state),\r\n            bind(internalReject, wrapper, state)\r\n          );\r\n        } catch (error) {\r\n          internalReject(wrapper, error, state);\r\n        }\r\n      });\r\n    } else {\r\n      state.value = value;\r\n      state.state = FULFILLED;\r\n      notify(state, false);\r\n    }\r\n  } catch (error) {\r\n    internalReject({ done: false }, error, state);\r\n  }\r\n};\r\n\r\n// constructor polyfill\r\nif (FORCED) {\r\n  // 25.4.3.1 Promise(executor)\r\n  PromiseConstructor = function Promise(executor) {\r\n    anInstance(this, PromisePrototype);\r\n    aCallable(executor);\r\n    call(Internal, this);\r\n    var state = getInternalState(this);\r\n    try {\r\n      executor(bind(internalResolve, state), bind(internalReject, state));\r\n    } catch (error) {\r\n      internalReject(state, error);\r\n    }\r\n  };\r\n  PromisePrototype = PromiseConstructor.prototype;\r\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\r\n  Internal = function Promise(executor) {\r\n    setInternalState(this, {\r\n      type: PROMISE,\r\n      done: false,\r\n      notified: false,\r\n      parent: false,\r\n      reactions: [],\r\n      rejection: false,\r\n      state: PENDING,\r\n      value: undefined\r\n    });\r\n  };\r\n  Internal.prototype = redefineAll(PromisePrototype, {\r\n    // `Promise.prototype.then` method\r\n    // https://tc39.es/ecma262/#sec-promise.prototype.then\r\n    then: function then(onFulfilled, onRejected) {\r\n      var state = getInternalPromiseState(this);\r\n      var reactions = state.reactions;\r\n      var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));\r\n      reaction.ok = isCallable(onFulfilled) ? onFulfilled : true;\r\n      reaction.fail = isCallable(onRejected) && onRejected;\r\n      reaction.domain = IS_NODE ? process.domain : undefined;\r\n      state.parent = true;\r\n      reactions[reactions.length] = reaction;\r\n      if (state.state != PENDING) notify(state, false);\r\n      return reaction.promise;\r\n    },\r\n    // `Promise.prototype.catch` method\r\n    // https://tc39.es/ecma262/#sec-promise.prototype.catch\r\n    'catch': function (onRejected) {\r\n      return this.then(undefined, onRejected);\r\n    }\r\n  });\r\n  OwnPromiseCapability = function () {\r\n    var promise = new Internal();\r\n    var state = getInternalState(promise);\r\n    this.promise = promise;\r\n    this.resolve = bind(internalResolve, state);\r\n    this.reject = bind(internalReject, state);\r\n  };\r\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\r\n    return C === PromiseConstructor || C === PromiseWrapper\r\n      ? new OwnPromiseCapability(C)\r\n      : newGenericPromiseCapability(C);\r\n  };\r\n\r\n  if (!IS_PURE && isCallable(NativePromise) && NativePromisePrototype !== Object.prototype) {\r\n    nativeThen = NativePromisePrototype.then;\r\n\r\n    if (!SUBCLASSING) {\r\n      // make `Promise#then` return a polyfilled `Promise` for native promise-based APIs\r\n      redefine(NativePromisePrototype, 'then', function then(onFulfilled, onRejected) {\r\n        var that = this;\r\n        return new PromiseConstructor(function (resolve, reject) {\r\n          call(nativeThen, that, resolve, reject);\r\n        }).then(onFulfilled, onRejected);\r\n      // https://github.com/zloirock/core-js/issues/640\r\n      }, { unsafe: true });\r\n\r\n      // makes sure that native promise-based APIs `Promise#catch` properly works with patched `Promise#then`\r\n      redefine(NativePromisePrototype, 'catch', PromisePrototype['catch'], { unsafe: true });\r\n    }\r\n\r\n    // make `.constructor === Promise` work for native promise-based APIs\r\n    try {\r\n      delete NativePromisePrototype.constructor;\r\n    } catch (error) { /* empty */ }\r\n\r\n    // make `instanceof Promise` work for native promise-based APIs\r\n    if (setPrototypeOf) {\r\n      setPrototypeOf(NativePromisePrototype, PromisePrototype);\r\n    }\r\n  }\r\n}\r\n\r\n$({ global: true, wrap: true, forced: FORCED }, {\r\n  Promise: PromiseConstructor\r\n});\r\n\r\nsetToStringTag(PromiseConstructor, PROMISE, false, true);\r\nsetSpecies(PROMISE);\r\n\r\nPromiseWrapper = getBuiltIn(PROMISE);\r\n\r\n// statics\r\n$({ target: PROMISE, stat: true, forced: FORCED }, {\r\n  // `Promise.reject` method\r\n  // https://tc39.es/ecma262/#sec-promise.reject\r\n  reject: function reject(r) {\r\n    var capability = newPromiseCapability(this);\r\n    call(capability.reject, undefined, r);\r\n    return capability.promise;\r\n  }\r\n});\r\n\r\n$({ target: PROMISE, stat: true, forced: IS_PURE || FORCED }, {\r\n  // `Promise.resolve` method\r\n  // https://tc39.es/ecma262/#sec-promise.resolve\r\n  resolve: function resolve(x) {\r\n    return promiseResolve(IS_PURE && this === PromiseWrapper ? PromiseConstructor : this, x);\r\n  }\r\n});\r\n\r\n$({ target: PROMISE, stat: true, forced: INCORRECT_ITERATION }, {\r\n  // `Promise.all` method\r\n  // https://tc39.es/ecma262/#sec-promise.all\r\n  all: function all(iterable) {\r\n    var C = this;\r\n    var capability = newPromiseCapability(C);\r\n    var resolve = capability.resolve;\r\n    var reject = capability.reject;\r\n    var result = perform(function () {\r\n      var $promiseResolve = aCallable(C.resolve);\r\n      var values = [];\r\n      var counter = 0;\r\n      var remaining = 1;\r\n      iterate(iterable, function (promise) {\r\n        var index = counter++;\r\n        var alreadyCalled = false;\r\n        remaining++;\r\n        call($promiseResolve, C, promise).then(function (value) {\r\n          if (alreadyCalled) return;\r\n          alreadyCalled = true;\r\n          values[index] = value;\r\n          --remaining || resolve(values);\r\n        }, reject);\r\n      });\r\n      --remaining || resolve(values);\r\n    });\r\n    if (result.error) reject(result.value);\r\n    return capability.promise;\r\n  },\r\n  // `Promise.race` method\r\n  // https://tc39.es/ecma262/#sec-promise.race\r\n  race: function race(iterable) {\r\n    var C = this;\r\n    var capability = newPromiseCapability(C);\r\n    var reject = capability.reject;\r\n    var result = perform(function () {\r\n      var $promiseResolve = aCallable(C.resolve);\r\n      iterate(iterable, function (promise) {\r\n        call($promiseResolve, C, promise).then(capability.resolve, reject);\r\n      });\r\n    });\r\n    if (result.error) reject(result.value);\r\n    return capability.promise;\r\n  }\r\n});\r\n"]},"metadata":{},"sourceType":"script"}