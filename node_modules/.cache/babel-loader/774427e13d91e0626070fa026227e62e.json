{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = require(\"react\");\n\nvar use_force_update_1 = require(\"use-force-update\");\n\nvar context_1 = require(\"./context\");\n\nvar default_global_state_manager_1 = require(\"./default-global-state-manager\");\n\nvar set_global_1 = require(\"./set-global\");\n\nvar react_hooks_error_1 = require(\"./utils/react-hooks-error\");\n\nfunction _useGlobal(overrideGlobalStateManager, property) {\n  if (!react_1.useContext) {\n    throw react_hooks_error_1.default;\n  }\n\n  var globalStateManager = overrideGlobalStateManager || react_1.useContext(context_1.default) || default_global_state_manager_1.default;\n  var forceUpdate = use_force_update_1.default();\n\n  var removeForceUpdateListener = function removeForceUpdateListener() {\n    globalStateManager.removePropertyListener(forceUpdate);\n  };\n\n  if (typeof property === 'undefined') {\n    react_1.useEffect(function () {\n      return removeForceUpdateListener;\n    }, []);\n    var globalStateSetter = react_1.useCallback(function (newGlobalState, callback) {\n      if (callback === void 0) {\n        callback = null;\n      }\n\n      return set_global_1.default(globalStateManager, newGlobalState, callback);\n    }, []);\n    return [globalStateManager.spyState(forceUpdate), globalStateSetter];\n  }\n\n  react_1.useEffect(function () {\n    globalStateManager.addPropertyListener(property, forceUpdate);\n    return removeForceUpdateListener;\n  });\n  var globalPropertySetter = react_1.useCallback(function (value, callback) {\n    if (callback === void 0) {\n      callback = null;\n    }\n\n    var newGlobalState = Object.create(null);\n    newGlobalState[property] = value;\n    return set_global_1.default(globalStateManager, newGlobalState, callback);\n  }, []);\n  return [globalStateManager.state[property], globalPropertySetter];\n}\n\nexports.default = _useGlobal;","map":{"version":3,"sources":["E:/project1/project/src/node_modules/reactn/build/use-global.js"],"names":["Object","defineProperty","exports","value","react_1","require","use_force_update_1","context_1","default_global_state_manager_1","set_global_1","react_hooks_error_1","_useGlobal","overrideGlobalStateManager","property","useContext","default","globalStateManager","forceUpdate","removeForceUpdateListener","removePropertyListener","useEffect","globalStateSetter","useCallback","newGlobalState","callback","spyState","addPropertyListener","globalPropertySetter","create","state"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,IAAIC,kBAAkB,GAAGD,OAAO,CAAC,kBAAD,CAAhC;;AACA,IAAIE,SAAS,GAAGF,OAAO,CAAC,WAAD,CAAvB;;AACA,IAAIG,8BAA8B,GAAGH,OAAO,CAAC,gCAAD,CAA5C;;AACA,IAAII,YAAY,GAAGJ,OAAO,CAAC,cAAD,CAA1B;;AACA,IAAIK,mBAAmB,GAAGL,OAAO,CAAC,2BAAD,CAAjC;;AACA,SAASM,UAAT,CAAoBC,0BAApB,EAAgDC,QAAhD,EAA0D;AACtD,MAAI,CAACT,OAAO,CAACU,UAAb,EAAyB;AACrB,UAAMJ,mBAAmB,CAACK,OAA1B;AACH;;AACD,MAAIC,kBAAkB,GAAGJ,0BAA0B,IAC/CR,OAAO,CAACU,UAAR,CAAmBP,SAAS,CAACQ,OAA7B,CADqB,IAErBP,8BAA8B,CAACO,OAFnC;AAGA,MAAIE,WAAW,GAAGX,kBAAkB,CAACS,OAAnB,EAAlB;;AACA,MAAIG,yBAAyB,GAAG,SAA5BA,yBAA4B,GAAY;AACxCF,IAAAA,kBAAkB,CAACG,sBAAnB,CAA0CF,WAA1C;AACH,GAFD;;AAGA,MAAI,OAAOJ,QAAP,KAAoB,WAAxB,EAAqC;AACjCT,IAAAA,OAAO,CAACgB,SAAR,CAAkB,YAAY;AAAE,aAAOF,yBAAP;AAAmC,KAAnE,EAAqE,EAArE;AACA,QAAIG,iBAAiB,GAAGjB,OAAO,CAACkB,WAAR,CAAoB,UAAUC,cAAV,EAA0BC,QAA1B,EAAoC;AAC5E,UAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AAAEA,QAAAA,QAAQ,GAAG,IAAX;AAAkB;;AAC7C,aAAOf,YAAY,CAACM,OAAb,CAAqBC,kBAArB,EAAyCO,cAAzC,EAAyDC,QAAzD,CAAP;AACH,KAHuB,EAGrB,EAHqB,CAAxB;AAIA,WAAO,CAACR,kBAAkB,CAACS,QAAnB,CAA4BR,WAA5B,CAAD,EAA2CI,iBAA3C,CAAP;AACH;;AACDjB,EAAAA,OAAO,CAACgB,SAAR,CAAkB,YAAY;AAC1BJ,IAAAA,kBAAkB,CAACU,mBAAnB,CAAuCb,QAAvC,EAAiDI,WAAjD;AACA,WAAOC,yBAAP;AACH,GAHD;AAIA,MAAIS,oBAAoB,GAAGvB,OAAO,CAACkB,WAAR,CAAoB,UAAUnB,KAAV,EAAiBqB,QAAjB,EAA2B;AACtE,QAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AAAEA,MAAAA,QAAQ,GAAG,IAAX;AAAkB;;AAC7C,QAAID,cAAc,GAAGvB,MAAM,CAAC4B,MAAP,CAAc,IAAd,CAArB;AACAL,IAAAA,cAAc,CAACV,QAAD,CAAd,GAA2BV,KAA3B;AACA,WAAOM,YAAY,CAACM,OAAb,CAAqBC,kBAArB,EAAyCO,cAAzC,EAAyDC,QAAzD,CAAP;AACH,GAL0B,EAKxB,EALwB,CAA3B;AAMA,SAAO,CAACR,kBAAkB,CAACa,KAAnB,CAAyBhB,QAAzB,CAAD,EAAqCc,oBAArC,CAAP;AACH;;AACDzB,OAAO,CAACa,OAAR,GAAkBJ,UAAlB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar use_force_update_1 = require(\"use-force-update\");\nvar context_1 = require(\"./context\");\nvar default_global_state_manager_1 = require(\"./default-global-state-manager\");\nvar set_global_1 = require(\"./set-global\");\nvar react_hooks_error_1 = require(\"./utils/react-hooks-error\");\nfunction _useGlobal(overrideGlobalStateManager, property) {\n    if (!react_1.useContext) {\n        throw react_hooks_error_1.default;\n    }\n    var globalStateManager = overrideGlobalStateManager ||\n        react_1.useContext(context_1.default) ||\n        default_global_state_manager_1.default;\n    var forceUpdate = use_force_update_1.default();\n    var removeForceUpdateListener = function () {\n        globalStateManager.removePropertyListener(forceUpdate);\n    };\n    if (typeof property === 'undefined') {\n        react_1.useEffect(function () { return removeForceUpdateListener; }, []);\n        var globalStateSetter = react_1.useCallback(function (newGlobalState, callback) {\n            if (callback === void 0) { callback = null; }\n            return set_global_1.default(globalStateManager, newGlobalState, callback);\n        }, []);\n        return [globalStateManager.spyState(forceUpdate), globalStateSetter];\n    }\n    react_1.useEffect(function () {\n        globalStateManager.addPropertyListener(property, forceUpdate);\n        return removeForceUpdateListener;\n    });\n    var globalPropertySetter = react_1.useCallback(function (value, callback) {\n        if (callback === void 0) { callback = null; }\n        var newGlobalState = Object.create(null);\n        newGlobalState[property] = value;\n        return set_global_1.default(globalStateManager, newGlobalState, callback);\n    }, []);\n    return [globalStateManager.state[property], globalPropertySetter];\n}\nexports.default = _useGlobal;\n"]},"metadata":{},"sourceType":"script"}